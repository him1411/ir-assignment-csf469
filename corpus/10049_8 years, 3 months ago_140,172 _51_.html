I currently have just under a million locations in a mysql database all with longitude and latitude information.I am trying to find the distance between one point and many other points via a query. It\'s not as fast as I want it to be especially with 100+ hits a second.  Is there a faster query or possibly a faster system other than mysql for this? I\'m using this query:Note: The provided distance is in Miles. If you need Kilometers, use 6371 instead of 3959.Create your points using Point values of Geometry datatypes in MyISAM tableCreate a SPATIAL index on these pointsUse MBRContains() to find the values:, or, in MySQL 5.1 and above:This will select all points approximately within the box (@lat +/- 10 km, @lon +/- 10km).This actually is not a box, but a spherical rectangle: latitude and longitude bound segment of the sphere. This may differ from a plain rectangle on the Franz Joseph Land, but quite close to it on most inhabited places.Apply additional filtering to select everything inside the circle (not the square)Possibly apply additional fine filtering to account for the big circle distance (for large distances)Not a MySql specific answer, but it\'ll improve the performance of your sql statement.What you\'re effectively doing is calculating the distance to every point in the table, to see if it\'s within 10 units of a given point.What you can do before you run this sql, is create four points that draw a box 20 units on a side, with your point in the center i.e.. (x1,y1 ) . . . (x4, y4), where (x1,y1) is (givenlong + 10 units, givenLat + 10units) . . . (givenLong - 10units, givenLat -10 units).\nActually, you only need two points, top left and bottom right call them (X1, Y1) and (X2, Y2)Now your SQL statement use these points to exclude rows that definitely are more than 10u from your given point, it can use indexes on the latitudes & longitudes, so will be orders of magnitude faster than what you currently have.e.g.The box approach can return false positives (you can pick up points in the corners of the box that are > 10u from the given point), so you still need to calculate the distance of each point. However this again will be much faster because you have drastically limited the number of points to test to the points within the box.I call this technique "Thinking inside the box" :)EDIT: Can this be put into one SQL statement?I have no idea what mySql or Php is capable of, sorry.\nI don\'t know where the best place is to build the four points, or how they could be passed to a mySql query in Php. However, once you have the four points, there\'s nothing stopping you combining your own SQL statemen with mine.I know with MS SQL I can build a SQL statement that declares four floats (X1, Y1, X2, Y2) and calculates them before the "main" select statement, like I said, I\'ve no idea if this can be done with MySql. However I\'d still be inclined to build the four points in C# and pass them as parameters to the SQL query.Sorry I can\'t be more help, if anyone can answer the MySQL & Php specific portions of this, feel free to edit this answer to do so.Check this presentation for a good answer.\nBasically it shows the two different approaches shown in the comments, with a detailed explanation on why/when you should use one or the other and why the "in the box" calculation can be very interesting.Geo Distance Search with MySQLon this blog post, the following MySql function was posted. I haven\'t tested it much, but from what I gathered from the post, if your latitude and longitude fields are indexed, this may work well for you:Sample usage:\nAssuming a table called Places with fields latitude & longitude:select get_distance_in_miles_between_geo_locations(-34.017330,\n  22.809500, latitude, longitude) as distance_from_input from places;all snagged from this postThis is the distance calculation query between to points in MySQL, I have used it in a long database, it it working perfect! Note: do the changes (database name, table name, column etc) as per your requirements.sourcehttp://postgis.refractions.net/You may have to look into this database that is optimized for geolocation storage.The full code with details about how to install as MySQL plugin are here: https://github.com/lucasepe/lib_mysqludf_haversineI posted this last year as comment. Since kindly @TylerCollier  suggested me to post as answer, here it is. Another way is to write a custom UDF function that returns the haversine distance from two points. This function can take in input:So we can write something like this:to fetch all records with a distance less then 40 kilometers. Or:to fetch all records with a distance less then 25 feet.The core function is:A fast, simple and accurate (for smaller distances) approximation can be done with a spherical projection. At least in my routing algorithm I get a 20% boost compared to the correct calculation. In Java code it looks like:Not sure about MySQL (sorry!).Be sure you know about the limitation (the third param of assertEquals means the accuracy in kilometers):Here is a very detailed description of Geo Distance Search with MySQL a solution based on implementation of Haversine Formula to mysql. The complete solution description with theory, implementation and further performance optimization. Although the spatial optimization part didn\'t work correct in my case.\nhttp://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQLHave a read of Geo Distance Search with MySQL, a solution \nbased on implementation of Haversine Formula to MySQL. This is a complete solution \ndescription with theory, implementation and further performance optimization. \nAlthough the spatial optimization part didn\'t work correctly in my case. I noticed two mistakes in this: the use of abs in the select statement on p8.  I just omitted abs and it worked.the spatial search distance function on p27 does not convert to radians or multiply longitude by cos(latitude), unless his spatial data is loaded with this in consideration (cannot tell from context of article), but his example on p26 indicates that his spatial data POINT is not loaded with radians or degrees.A MySQL function which returns the number of metres between the two coordinates:To return the value in a different format, replace the 6371000 in the function with the radius of Earth in your choice of unit. For example, kilometres would be 6367 and miles would be 3957.To use the function, just call it as you would any other function in MySQL. For example, if you had a table city, you could find the distance between every city to every other city: