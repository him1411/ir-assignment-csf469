How should a latex source code listing look like to produce an output like in known books, for example one for the Spring Framework? I\'ve tried with the latex listings package but wasn\'t able to produce something that looked as nice as the one below. So I\'m primarely interested in the formatting instructions to produce something like the sample below (from Manning\'s sample chapter for Spring in Action):EDIT\nWith the help especially of Tormod Fjeldsk\xc3\xa5r here\'s the complete snippet to produce the desired look:Use it with this in your document:It seems to me that what you really want, is to customize the look of the captions. This is most easily done using the caption package. For instructions how to use this package, see the manual (PDF). You would probably need to create your own custom caption format, as described in chapter 4 in the manual.Edit: Tested with MikTex:Result:I am happy with the listings package:Here is how I configure it:I use it like this:And please, whatever you do, configure the listings package to use fixed-width font (as in your example; you\'ll find the option in the documentation). Default setting uses proportional font typeset on a grid, which is, IMHO, incredibly ugly and unreadable, as can be seen from the other answers with pictures. I am personally very irritated when I must read some code typeset in a proportional font.Try setting fixed-width font with this:Have a try on the listings package. Here is an example of what I used some time ago to have a coloured Java listing:You may want to customize that. There are several references of the listings package. Just google them.I wonder why nobody mentioned the Minted package. It has far better syntax highlighting than the LaTeX listing package. It uses Pygments.Example in LaTeX:Which results in:You need to use the flag -shell-escape with the pdflatex command.For more information: https://www.sharelatex.com/learn/Code_Highlighting_with_mintedTake a look at algorithms package, especially the algorithm environment.There are several other things you can do, such as selecting new fonts: For R code I useAnd it looks exactly like this