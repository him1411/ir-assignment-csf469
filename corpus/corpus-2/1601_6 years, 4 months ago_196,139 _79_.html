I am using the Ruby on Rails 3.1 pre version. I like to use PostgreSQL, but the problem is installing the pg gem. It gives me the following error:How do I solve this problem?It looks like in Ubuntu that header is part of the libpq-dev package (at least in the following Ubuntu versions: \n11.04 (Natty Narwhal), 10.04 (Lucid Lynx), 11.10 (Oneiric Ocelot), 12.04 (Precise Pangolin) and 14.04 (Trusty Tahr)):So try installing libpq-dev or its equivalent for your OS:On Mac OS X, use Homebrew to install the proper headers:and then runningshould work.I had also tried doing gem install libpq-dev, but I received this error:However I found that installing with sudo apt-get (which I try to avoid using with Ruby on Rails) worked, i.e.then I was able to dowithout issues.I could solve this in another way. I didn\'t find the library on my system. Thus I installed it using an app from PostgreSQL main website. In my case (OS X) I found the file under /Library/PostgreSQL/9.1/include/ once the installation was over. You may also have the file somewhere else depending on your system if you already have PostgreSQL installed.Thanks to this link on how to add an additional path for gem installation, I could point the gem to the lib with this command:After that, it works, because it now knows where to find the missing library. Just replace the path with the right location for your libpq-fe.hFor CentOS 6.4,worked well!Can\'t find the libpq-fe.h header i had success on CentOS 7.0.1406 running the following commands:Alternatively, you can configure bundler to always install pg with these options (helpful for running bundler in deploy environments), In my case it was package postgresql-server-dev-8.4 (I am on Ubuntu 11.04 (Natty Narwhal), 64 bits).On Mac OS X run like this:***/path/to/pg_config*** is path to pg_configJust for the record:Ruby on Rails 4 application in OS X with PostgresApp (in this case 0.17.1 version needed - kind of an old project):The right answer for Mac users with Postgres.app is to build against the libpq provided with that package. For example, with the 9.4 release (current as of this writing), all you need is:This will keep your pg gem in sync with exactly the version of PostgreSQL you have installed. Installing something from Homebrew is a waste in this case.I had the same issue on Amazon Linux. I could find the header libpq-fe.h, but somehow it didn\'t work.It came from the different versions of the packages that were installed through the different users on the machine. PostgreSQL 9.2 and PostgreSQL 9.3 were installed. So, make sure of your PostgreSQL version before including the libraries.For me, the magic command line was:Source: An almost idiot\'s guide to install PostgreSQL 9.3, PostGIS 2.1 and pgRouting with YumA more general answer for any Debian-based distribution (which includes Ubuntu) is the following. First, install the apt-file package running as root:This allows you to search for packages containing a file. Then, update its database using(this can be run as normal user). Then, look for the missing header using:On my machine, this gives:There you go !I recently upgraded to Mac OS X v10.10 (Yosemite) and was having difficulty building the pg gem.The error reported was the typical:My solution was to gem uninstall pg and then bundle update pg to replace the gem with the latest. I did run brew update; brew upgrade after the Yosemite install to get the latest versions of packages I had installed previously.On a Mac, I solved it using this code:On CentOS,I installed libpq-dev package using below commandExecuting gem install pg returned the same error as "No pg_config... trying anyway. If building fails, please try again with --with-pg-config=/path/to/pg_config".Installing the gem as below solved my problemI am running Postgres.app on a Mac and I had to first. Thenworked for me.I had the same problem on Mac OS, but I installed the PostgreSQL gem easily by using the following in a terminal:(I installed PostgreSQL first with brew install postgresql.)I found this answer, and it was the only one that worked for me (Mac OS) - after researching for about two days:See Stack Overflow question Can't find the PostgreSQL client library (libpq).On FreeBSD (9.1) the necessary package is /usr/ports/database/postgresql-server* which when installed will also install the required header file that makes the gem install of "pg" fail. This answer here helped me find the solution but the difference in package names required a bit of searching.Hopefully this helps someone avoid a bit of head scratching when searching for the "-dev" package on a FreeBSD system!On Debian 7.0, 64-bit (Wheezy), just run:After you successfully installed libpq-dev, run:Under CentOS 6.5 (Squeeze) I created a file:with content:Note here, you should set your PostgreSQL path with the pg_config file. You can find this with the command:Save the file:and try to execute your command again.Note: Anytime you change the Bash configuration - changing the profile.d configuration - you should reload Bash.The location of libpq-fe.h depends on where your PostgreSQL install is (which depends on how you installed it). Use locate (http://en.wikipedia.org/wiki/Locate_%28Unix%29) to find the libpq-fe.h file on your machine. If it exists, it will be in the include directory of your PostgreSQL install.The bin directory, which contains pg_config, will be in the same directory as the include directory. As the error suggests, use the --with-pg-config option to install the gem:Note that you may need to run updatedb if you have never used locate or if you haven\'t updated since installing PostgreSQL.For AltLinux the package postgresqlx.x-devel (in my case postgresql9.5-devel) must be installed:I solved this installing the \'postgresql-common\' package. This package provides the pg_config binary which is most likely what you were missing.I was having a similar problem, and this fixed it for me:Source:https://gist.github.com/oisin/6562181On OS X 10.9 (Mavericks), I brew-installed postgresql, and I then had to rvm reinstall my Ruby. I am happy now :)I finally solved this problem, but not using the previously described methods.Using brew install postgresql, I find out that it had already been installed, but not linked.Find out where PostgreSQL is installed, and delete it,Then brew install postgresql again,brew link postgresqlgem install pgI just had this on OSX running brew and postgres@9.4.My fix was this:Only uninstalling (sudo apt-get purge) libpq-dev and re-installing  it worked for me. On OS X and MacPorts the -devel package for PostgreSQL is not required any more. Installing the pg gem works as follows:See also this post.