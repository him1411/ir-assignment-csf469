I\xe2\x80\x99m using JavaScript to pull a value out from a hidden field and display it in a textbox. The value in the hidden field is encoded.For example,gets pulled intovia some jQuery to get the value from the hidden field (it\xe2\x80\x99s at this point that I lose the encoding):The problem is that when I read chalk &amp; cheese from the hidden field, JavaScript seems to lose the encoding. To escape " and \', I want the encoding to remain.Is there a JavaScript library or a jQuery method that will HTML-encode a string?I use these functions:Basically a div element is created in memory, but it is never appended to the document.On the htmlEncode function I set the innerText of the element, and retrieve the encoded innerHTML; on the htmlDecode function I set the innerHTML value of the element and the innerText is retrieved.Check a running example here.The jQuery trick doesn\'t encode quote marks and in IE it will strip your whitespace.Based on the escape templatetag in Django, which I guess is heavily used/tested already, I made this function which does what\'s needed.It\'s arguably simpler (and possibly faster) than any of the workarounds for the whitespace-stripping issue - and it encodes quote marks, which is essential if you\'re going to use the result inside an attribute value for example.Update 2013-06-17:\nIn the search for the fastest escaping I have found this implementation of a replaceAll method:\nhttp://dumpsite.com/forum/index.php?topic=4.msg29#msg29\n(also referenced here: Fastest method to replace all instances of a character in a string)\nSome performance results here:\nhttp://jsperf.com/htmlencoderegex/25It gives identical result string to the builtin replace chains above. I\'d be very happy if someone could explain why it\'s faster!?Update 2015-03-04:\nI just noticed that AngularJS are using exactly the method above:\nhttps://github.com/angular/angular.js/blob/v1.3.14/src/ngSanitize/sanitize.js#L435They add a couple of refinements - they appear to be handling an obscure Unicode issue as well as converting all non-alphanumeric characters to entities. I was under the impression the latter was not necessary as long as you have an UTF8 charset specified for your document.I will note that (4 years later) Django still does not do either of these things, so I\'m not sure how important they are:\nhttps://github.com/django/django/blob/1.8b1/django/utils/html.py#L44Update 2016-04-06:\nYou may also wish to escape forward-slash /. This is not required for correct HTML encoding, however it is recommended by OWASP as an anti-XSS safety measure. (thanks to @JNF for suggesting this in comments)Here\'s a non-jQuery version that is considerably faster than both the jQuery .html() version and the .replace() version. This preserves all whitespace, but like the jQuery version, doesn\'t handle quotes.Speed: http://jsperf.com/htmlencoderegex/17Demo: I know this is an old one, but I wanted to post a variation of the accepted answer that will work in IE without removing lines:Underscore provides _.escape() and _.unescape() methods that do this.Good answer. Note that if the value to encode is undefined or null with jQuery 1.4.2 you might get errors such as:jQuery("<div/>").text(value).html is not a functionORUncaught TypeError: Object  has no method \'html\'The solution is to modify the function to check for an actual value:For those who prefer plain javascript, here is the method I have used successfully:Prototype has it built-in the String class. So if you are using/plan to use Prototype, it does something like:FWIW, the encoding is not being lost.  The encoding is used by the markup parser (browser) during the page load.  Once the source is read and parsed and the browser has the DOM loaded into memory, the encoding has been parsed into what it represents. So by the time your JS is execute to read anything in memory, the char it gets is what the encoding represented.I may be operating strictly on semantics here, but I wanted you to understand the purpose of encoding.  The word "lost" makes it sound like something isn\'t working like it should.Faster without Jquery. You can encode every character in your string:Or just target the main characters to worry about (&, inebreaks, <, >, " and \') like:Here is a simple javascript solution. It extends String object with a method "HTMLEncode" which can be used on an object without parameter, or with a parameter.I have made a gist "HTMLEncode method for javascript".I had a similar problem and solve it using the function encodeURIComponent from JavaScript (documentation)For example, in your case if you use:andyou will get chalk%20%26%20cheese. Even spaces are kept.In my case, I had to encode one backslash and this code works perfectlyand I got name%2FsurnameYou shouldn\'t have to escape/encode values in order to shuttle them from one input field to another.JS doesn\'t go inserting raw HTML or anything; it just tells the DOM to set the value property (or attribute; not sure).  Either way, the DOM handles any encoding issues for you.  Unless you\'re doing something odd like using document.write or eval, HTML-encoding will be effectively transparent.If you\'re talking about generating a new textbox to hold the result...it\'s still as easy.  Just pass the static part of the HTML to jQuery, and then set the rest of the properties/attributes on the object it returns to you.afaik there isn\'t any straight forward HTML Encode/Decode methods in javascript.However, what you can do, is to use JS to create an arbitrary element, set it\'s inner text, then read it using innerHTML. say, with jQuery this should work:or something along these linesIf you want to use jQuery. I found this:http://www.jquerysdk.com/api/jQuery.htmlspecialchars(part of jquery.string plugin offered by jQuery SDK)The problem with Prototype I believe is that it extends base objects in JavaScript and will be incompatible with any jQuery you may have used. Of course, if you are already using Prototype and not jQuery, it won\'t be a problem.EDIT: Also there is this, which is a port of Prototype\'s string utilities for jQuery:http://stilldesigning.com/dotstring/This is from ExtJS source code.Will output: &lt;script&gt;alert(&quot;I hack your site&quot;)&lt;/script&gt;.htmlEncode() will be accessible on all strings once defined.HtmlEncodes the given valueBased on angular\'s sanitize... (es6 module syntax)I ran into some issues with backslash in my Domain\\User string.I added this to the other escapes from Anentropic\'s answerWhich I found here:\nHow to escape backslash in JavaScript?