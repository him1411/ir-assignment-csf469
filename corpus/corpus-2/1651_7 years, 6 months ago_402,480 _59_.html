How can I upload files to server using JSP/Servlet? I tried this:However, I only get the file name, not the file content. When I add  enctype="multipart/form-data" to the <form>, then request.getParameter() returns null. During research I stumbled upon Apache Common FileUpload. I tried this:Unfortunately, the servlet threw an exception without a clear message and cause. Here is the stacktrace:To browse and select a file for upload you need a HTML <input type="file"> field in the form. As stated in the HTML specification you have to use the POST method and the enctype attribute of the form has to be set to "multipart/form-data".After submitting such a form, the binary multipart form data is available in the request body in a different format than when the enctype isn\'t set.Before Servlet 3.0, the Servlet API didn\'t natively support multipart/form-data. It supports only the default form enctype of application/x-www-form-urlencoded. The request.getParameter() and consorts would all return null when using multipart form data. This is where the well known Apache Commons FileUpload came into the picture.You can in theory parse the request body yourself based on ServletRequest#getInputStream(). However, this is a precise and tedious work which requires precise knowledge of RFC2388. You shouldn\'t try to do this on your own or copypaste some homegrown library-less code found elsewhere on the Internet. Many online sources have failed hard in this, such as roseindia.net. See also uploading of pdf file. You should rather use a real library which is used (and implicitly tested!) by millions of users for years. Such a library has proven its robustness.If you\'re using at least Servlet 3.0 (Tomcat 7, Jetty 9, JBoss AS 6, GlassFish 3, etc), then you can just use standard API provided HttpServletRequest#getPart() to collect the individual multipart form data items (most Servlet 3.0 implementations actually use Apache Commons FileUpload under the covers for this!). Also, normal form fields are available by getParameter() the usual way.First annotate your servlet with @MultipartConfig in order to let it recognize and support multipart/form-data requests and thus get getPart() to work:Then, implement its doPost() as follows:Note the Path#getFileName(). This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.In case you have a <input type="file" name="file" multiple="true" /> for multi-file upload, collect them as below (unfortunately there is no such method as request.getParts("file")):Note that Part#getSubmittedFileName() was introduced in Servlet 3.1 (Tomcat 8, Jetty 9, WildFly 8, GlassFish 4, etc). If you\'re not on Servlet 3.1 yet, then you need an additional utility method to obtain the submitted file name.Note the MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.If you\'re not on Servlet 3.0 yet (isn\'t it about time to upgrade?), the common practice is to make use of Apache Commons FileUpload to parse the multpart form data requests. It has an excellent User Guide and FAQ (carefully go through both). There\'s also the O\'Reilly ("cos") MultipartRequest, but it has some (minor) bugs and isn\'t actively maintained anymore for years. I wouldn\'t recommend using it. Apache Commons FileUpload is still actively maintained and currently very mature.In order to use Apache Commons FileUpload, you need to have at least the following files in your webapp\'s /WEB-INF/lib: Your initial attempt failed most likely because you forgot the commons IO. Here\'s a kickoff example how the doPost() of your UploadServlet may look like when using Apache Commons FileUpload:It\'s very important that you don\'t call getParameter(), getParameterMap(), getParameterValues(), getInputStream(), getReader(), etc on the same request beforehand. Otherwise the servlet container will read and parse the request body and thus Apache Commons FileUpload will get an empty request body. See also a.o. ServletFileUpload#parseRequest(request) returns an empty list.Note the FilenameUtils#getName(). This is a MSIE fix as to obtaining the file name. This browser incorrectly sends the full file path along the name instead of only the file name.Alternatively you can also wrap this all in a Filter which parses it all automagically and put the stuff back in the parametermap of the request so that you can continue using request.getParameter() the usual way and retrieve the uploaded file by request.getAttribute(). You can find an example in this blog article.Note that Glassfish versions older than 3.1.2 had a bug wherein the getParameter() still returns null. If you are targeting such a container and can\'t upgrade it, then you need to extract the value from getPart() with help of this utility method:Head to the following answers for detail on properly saving the obtained InputStream (the fileContent variable as shown in the above code snippets) to disk or database:Head to the following answers for detail on properly serving the saved file from disk or database back to the client:Head to the following answers how to upload using Ajax (and jQuery). Do note that the servlet code to collect the form data does not need to be changed for this! Only the way how you respond may be changed, but this is rather trivial (i.e. instead of forwarding to JSP, just print some JSON or XML or even plain text depending on whatever the script responsible for the Ajax call is expecting).Hope this all helps :)If you happen to use Spring MVC, this is how to: \n(I\'m leaving this here in case someone find it useful).Use a form with enctype attribute set to "multipart/form-data" (Same as BalusC\'s Answer)In your controller, map the request parameter file to MultipartFile type as follows:You can get the filename and size using MultipartFile\'s getOriginalFilename() and getSize().I\'ve tested this with Spring version 4.1.1.RELEASE.You need the common-io.1.4.jar file to be included in your lib directory, or if you\'re working in any editor, like NetBeans, then you need to go to project properties and just add the JAR file and you will be done. To get the common.io.jar file just google it or just go to the Apache Tomcat website where you get the option for a free download of this file. But remember one thing: download the binary ZIP file if you\'re a Windows user.I am Using common Servlet for every Html Form whether it has attachments or not.\nThis Servlet returns a TreeMap where the keys are jsp name Parameters and values are User Inputs and saves all attachments in fixed directory and later you rename the directory of your choice.Here Connections is our custom interface having connection object. I think this will help youWithout component or external Library in Tomcat 6 o 7Enabling Upload in the web.xml file:http://joseluisbz.wordpress.com/2014/01/17/manually-installing-php-tomcat-and-httpd-lounge/#Enabling%20File%20Uploads.AS YOU CAN SEE:Uploading Files using JSP. Files:In the html fileIn the JSP File or ServletEdit your code to servlet requirements, like max-file-size, max-request-size  and other options that you can to set...Another source of this problem occurs if you are using Geronimo with its embedded Tomcat. In this case, after many iterations of testing commons-io and commons-fileupload, the problem arises from a parent classloader handling the commons-xxx jars. This has to be prevented. The crash always occurred at: Note that the List type of fileItems has changed with the current version of commons-fileupload to be specifically List<FileItem> as opposed to prior versions where it was generic List. I added the source code for commons-fileupload and commons-io into my Eclipse project to trace the actual error and finally got some insight. First, the exception thrown is of type Throwable not the stated FileIOException nor even Exception (these will not be trapped). Second, the error message is obfuscatory in that it stated class not found because axis2 could not find commons-io.  Axis2 is not used in my project at all but exists as a folder in the Geronimo repository subdirectory as part of standard installation.Finally, I found 1 place that posed a working solution which successfully solved my problem. You must hide the jars from parent loader in the deployment plan. This was put into geronimo-web.xml with my full file shown below.For Spring MVC\nI have been trying for hours to do this\nand managed to have a simpler version that worked for taking form input both data and image.Controller to handle Hope it helps :)Here\'s an example using apache commons-fileupload:you can upload file using jsp /servlet.on the other hand server side.\nuse following code.from this object you have to get file items and fields then yo can store into server like followedSending multiple file for file we have to use enctype="multipart/form-data"\nand to send multiple file use  multiple="multiple" in input tag  HTML PAGESERVLET FILEweb.xmlCompile above servlet UploadServlet and create required entry in web.xml file as follows.