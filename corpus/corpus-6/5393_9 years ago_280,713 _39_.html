I was just wondering how most people fetch a mime type from a file in Java?  So far I\'ve tried two utils: JMimeMagic & Mime-Util.  The first gave me memory exceptions, the second doesn\'t close its streams off properly.  I was just wondering if anyone else had a method/library that they used and worked correctly?In Java 7 you can now just use Files.probeContentType(path).Unfortunately,does not work, since this use of URL leaves a file locked, so that, for example, it is undeletable.However, you have this:and also the following, which has the advantage of going beyond mere use of file extension, and takes  a peek at contentHowever, as suggested by the comment above, the built-in table of mime-types is quite limited, not including, for example, MSWord and PDF. So, if you want to generalize, you\'ll need to go beyond the built-in libraries, using, e.g., Mime-Util (which is a great library, using both file extension and content).The JAF API is part of JDK 6. Look at javax.activation package.Most interesting classes are javax.activation.MimeType - an actual MIME type holder - and javax.activation.MimetypesFileTypeMap - class whose instance can resolve MIME type as String for a file:From roseindia:If you\'re an Android developer, you can use a utility class android.webkit.MimeTypeMap which maps MIME-types to file extensions and vice versa.  Following code snippet may help you.Apache Tika offers in tika-core a mime type detection based based on magic markers in the stream prefix. tika-core does not fetch other dependencies, which makes it as lightweight as the currently unmaintained Mime Type Detection Utility.Simple code example (Java 7), using the variables theInputStream and theFileNamePlease note that MediaType.detect(...) cannot be used directly (TIKA-1120). More hints are provided at https://tika.apache.org/0.10/detection.html.If you are stuck with java 5-6 then this utility class from servoy open source product https://github.com/Servoy/servoy-client/blob/e7f5bce3c3dc0f0eb1cd240fce48c75143a25432/servoy_shared/src/com/servoy/j2db/util/MimeTypes.java#L34You only need this function It probes the first bytes of the content and returns the content types based on that content and not by file extension.With Apache Tika you need ony three lines of code:If you have a groovy console, just paste and run this code to play with it:Keep in mind that its APIs are rich, it can parse "anything". As of tika-core 1.14, you have:See the apidocs for more information.I was just wondering how most people fetch a mime type from a file in Java? I\'ve published my SimpleMagic Java package which allows content-type (mime-type) determination from files and byte arrays. It is designed to read and run the Unix file(1) command magic files that are a part of most ~Unix OS configurations.I tried Apache Tika but it is huge with tons of dependencies, URLConnection doesn\'t use the bytes of the files, and MimetypesFileTypeMap also just looks at files names.With SimpleMagic you can do something like:I tried several ways to do it, including the first ones said by @Joshua Fox. But some don\'t recognize frequent mimetypes like for PDF files, and other could not be trustable with fake files (I tried with a RAR file with extension changed to TIF). The solution I found, as also is said by @Joshua Fox in a superficial way, is to use MimeUtil2, like this:It is better to use two layer validation for files upload. First you can check for the mimeType and validate it. Second you should look to convert the first 4 bytes of your file to hexadecimal and then compare it with the magic numbers. Then it will be a really secure way to check for file validations.This is the simplest way I found for doing this:if you work on linux OS ,there is a command line file --mimetype: Thenin spring MultipartFile file;org.springframework.web.multipart.MultipartFilefile.getContentType();After trying various other libraries I settled with mime-util.