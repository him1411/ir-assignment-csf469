Using git 1.6.4.2, when I do a git pull I get this error: I\'ve tried git remote prune origin, but it didn\'t help.Try cleaning-up your local repository with:man git-gc(1):man git-remote(1):Happened to me as well. In my case, the bad ref was master, and I did the following:This made git restore the ref file. After that everything worked as expected again.This did the job for me:I had this same issue and solved it by going to the file it was erroring on:This file was full of nulls, I replaced it with the latest ref from github.For me it worked to remove the files that are throwing errors from the folder .git/refs/remotes/origin/This works for me:On SourceTree requires one more pull to fix. it works for me these two command lines\nI had the error ref problem, I could not do the pullIn my case, the problem was solved after I\'ve deleted all the remove reference files under .gitIf you look at the message, it would tell you which files you need to delete (specifically)The files to delete sit under .git/refs/remotesI\'ve just deleted all the files there, and ran gc pruneAfter that, everything works just fine.To Answer this in very short, this issue comes when your local has some information about the remote and someone changes something which makes remote and your changes unsync. I was getting this issue because someone has deleted remote branch and again created with the same name.For dealing with such issues, do a pull or fetch from remote.or if you are using any GUI, do a fetch from remote.If git gc --prune=now dosen\'t help you. (bad luck like me)What I did is remove the project in local, and re clone the whole project again.rm .git/refs/remotes/origin/mastergit fetchgit branch --set-upstream-to=origin/masterI was able to work with I had same issue. i follow following steps 1)switch your branch which having issue  to other branch 2) delete that branch 3) checkout again.Note:- You can stash you uncommitted changes and put it back again.For me, I had a local branch named feature/phase2 and the remote branch was named feature/phase2/data-model. The naming conflict was the cause of the problem, so I deleted my local branch (you could rename it if it had anything you needed to keep)I had the same problem with composer update. But for me it only worked after I cleared the composer cache and after deleting the content of the vendor folder:Got this issue when trying to clone from a git bundle created file, none of the other answers worked because I couldn\'t clone the repo (so git gc and removing/editing files was out of the question).There was however another way to fix this - the source file of a .bundle file was begining with:Simply removing the fourth line with vim fixed the issue.I had this issue while using SourceTree.  I tried to pull again and it worked.  I think I Was witching branches (checkout) too fast :).My situation is a bit different from the poster\'s because my repository has been relatively cooperative, without any apparent corruption.Had the same msg but with a directory, got a failed msg on pull.git --prone did not help me either.\nTurns out there was a file with the same name as a directory created remotely.Had to go to .git\\logs\\refs\\remotes\\origin and erase the locale file - then pull again, all good.Try this:Branch_Name, the branch which you are currently on.If you do only a git pull, it pulls all other created branch name as well.So is the reason you are getting this:Just ran into the problem today.With SourceTree on Windows Servers, you may need to run it as an Administrator. That fixes my problem of "unable to update local ref" on Atlassian Source Tree 2.1.2.5 on a Windows Server 2012 R2 in domain.I was getting this error once running git fetch:error: cannot lock ref \'refs/remotes/origin/branchname\': ref refs/remotes/origin/featureEmailTemplate is at 45c5f2ab... but expected d48af9... from https://.../...  (unable to update local ref)The following command fixed the problem :git gc --prun=nowgit fetch --prune fixed this error for me:This assumes that the offending branch was deleted on the remote, though.