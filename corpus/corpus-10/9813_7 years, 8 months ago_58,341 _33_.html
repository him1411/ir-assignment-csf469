I\'ve been a bad kid and used the following syntax in my partial templates to set default values for local variables if a value wasn\'t explicitly defined in the :locals hash when rendering the partial -- This seemed to work fine until recently, when (for no reason I could discern) non-passed variables started behaving as if they had been defined to nil (rather than undefined).As has been pointed by various helpful people on SO, http://api.rubyonrails.org/classes/ActionView/Base.html says not to useand instead to useI\'m trying to amend my ways, but that means changing a lot of templates.  Can/should I just charge ahead and make this change in all the templates?  Is there any trickiness I need to watch for?  How diligently do I need to test each one?I do this:Since local_assigns is a hash, you could also use fetch with the optional default_value.This will return default_value if foo wasn\'t set.WARNING:Be careful with local_assigns.fetch :foo, default_value when default_value is a method, as it will be called anyway in order to pass its result to fetch.If your default_value is a method, you can wrap it in a block: local_assigns.fetch(:foo) { default_value } to prevent its call when it\'s not needed.How aboutThis says "use foo if it is not nil or true. Otherwise assign default_value to foo"I think this should be repeated here (from http://api.rubyonrails.org/classes/ActionView/Base.html):If you need to find out whether a certain local variable has been assigned a value in a particular render call, you need to use the following pattern:Testing using defined? headline will not work. This is an implementation restriction.I know it\'s an old thread but here\'s my small contribution: i would use local_assigns[:foo].presence in a conditional inside the partial. \nThen i set foo only when needed in the render call: Have a look at te official Rails guide here. Valid from RoR 3.1.0.I think a better option that allows for multiple default variables:     This is a derivative of Pablo\'s answer.  This allows me to set a default (\'full\'), and in the end, \'mode\' is set in both local_assigns and an actual local variable.haml/slim:erb:In my case, I use:in my partial.  \nI don\'t have idea if that is good but for my is OKMore intuitive and compact:<% some_local = default_value unless local_assigns[:some_local] %>If you do not want to pass local variable to partial each time you call it you do this:This way you avoid undefined variable error. This will allow you to call your partial with/without local variables.A helper can be created to look like this:Implemented like:See my blog for details on how and why.Note that this solution does allow you to pass nil or false as the value without it being overridden.