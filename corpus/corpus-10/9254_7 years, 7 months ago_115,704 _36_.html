I\'ve got some PNG images with transparency, and I need to create versions with the image layer composed onto a white background.  I\'ve tried various things with Image Magick "convert" operations, but either nothing happens at all or I get an error.  I don\'t want to go to an intermediate JPG form because I don\'t want the artifacts.  Of course it\'s easy to do this in Gimp or Photoshop or whatever, but I\'d really rather script it from the command line because there  are many of these things.An example of a non-working Image Magick command is:That results in an error.Thanks!This works for me:Example:Feel free to replace white with any other color you want. Imagemagick documentation says this about the -alpha remove operation:This operation is simple and fast, and does the job without needing\n  any extra memory use, or other side effects that may be associated\n  with alternative transparency removal techniques. It is thus the\n  prefered way of removing image transparency.Flattening image and applying background image is straight forward in ImageMagickHowever, order of the commands is very importantTo apply any background on a transparent image and flatten it, first apply the background than flatten it. The reverse doesn\'t work. The only one that worked for me was a mix of all the answers:Using -flatten made me completely mad because -flatten in combination with mogrify crop and resizing simply doesn\'t work. The official and for me only correct way is to "remove" the alpha channel.-alpha remove -alpha off (not needed with JPG)See documention: http://www.imagemagick.org/Usage/masking/#removeIt appears that your command is correct so the problem might be due to missing support for PNG (). You can check with convert -list configure or just try the following:The Alpha Remove section of the ImageMagick Usage Guide suggests using the -alpha remove option, e.g.:...using the -background color of your choosing.The guide states:This operation is simple and fast, and does the job without needing any extra memory use, or other side effects that may be associated with alternative transparency removal techniques. It is thus the prefered way of removing image transparency.It additionally adds the note:Note that while transparency is \'removed\' the alpha channel will remain turned on, but will now be fully-opaque. If you no longer need the alpha channel you can then use Alpha Off to disable it. Thus, if you do not need the alpha channel you can make your output image size smaller by adding the -alpha off option, e.g:There are more details on other, often-used techniques for removing transparency described in the Removing Transparency from Images section.Included in that section is mention of an important caveat to the usage of -flatten as a technique for removing transparency:However this will not work with "mogrify" or with a sequence of multiple images, basically because the "-flatten" operator is really designed to merge multiple images into a single image.So, if you are converting several images at once, e.g. generating thumbnails from a PDF file, -flatten will not do what you want (it will flatten all images for all pages into one image).  On the other hand, using the -alpha remove technique will still produce multiple images, each one having transparency removed.This is not exactly the answer to your question, but I found your question while trying to figure out how to remove the alpha channel, so I decided to add this answer here:If you want to remove alpha channel using imagemagick, you can use this command:here\'s how to replace the same image in all folders in a directory with white instead of transparent:mogrify -background white -flatten */*.pngWelp it looks like my decision to install "graphics magick" over "image magick" has some rough edges - when I reinstall genuine crufty old "image magick", then the above command works perfectly well.edit, a long time later â€” One of these days I\'ll check to see if "graphics magick" has fixed this issue. To actually remove the alpha channel from the file, use the alpha off option:this creates an image just placing the 1st with transparency on top of the 2ndoriginally found the tip on this post