I need to do a very simple thing - find out if the software keyboard is shown. Is this possible in Android?NEW ANSWER added Jan 25th 2012Since writing the below answer, someone clued me in to the existence of ViewTreeObserver and friends, APIs which have been lurking in the SDK since version 1.Rather than requiring a custom Layout type, a much simpler solution is to give your activity\'s root view a known ID, say @+id/activityRoot, hook a GlobalLayoutListener into the ViewTreeObserver, and from there calculate the size diff between your activity\'s view root and the window size:Using a utility such as: Easy!Note:\nYour application must set this flag in Android Manifest android:windowSoftInputMode="adjustResize" otherwise above solution will not work.ORIGINAL ANSWERYes it\'s possible, but it\'s far harder than it ought to be.If I need to care about when the keyboard appears and disappears (which is quite often) then what I do is customize my top-level layout class into one which overrides onMeasure(). The basic logic is that if the layout finds itself filling significantly less than the total area of the window, then a soft keyboard is probably showing. Then in your Activity class...So hopefully this helps someone out.The new answer that Reuben Scratton gave is great and really efficient, but it really only works if you set your windowSoftInputMode to adjustResize. If you set it to adjustPan, it\'s still not possible to detect whether or not the keyboard is visible using his code snippet. To work around this, I made this tiny modification to the code above.Sorry for the late answer, but I had created a little helper class to handle open/close events with notifying listeners and other useful things, may be someone would find it helpful:Usage example:It has been forever in terms of computer but this question is still unbelievably relevant!So I\'ve taken the above answers and have combined and refined them a bit...Works for me :)NOTE: \nIf you notice that the DefaultKeyboardDP does not fit your device play with the value and post a comment for everyone to know what should be the value... eventually we will get the correct value to fit all devices!Some improvements to avoid wrongly detect the visibility of soft keyboard on high density devices: Threshold of height difference should be defined as 128 dp, not 128 pixels.\nRefer to Google design doc about Metrics and Grid, 48 dp is comfortable size for touch object and 32 dp is minimum for buttons. Generic soft keyboard should include 4 rows of key buttons, so minimum keyboard height should be:  32 dp * 4 = 128 dp, that means threshold size should transfer to pixels by multiply device density. For xxxhdpi devices (density 4), the  soft keyboard height threshold should be 128 * 4 = 512 pixels.Height difference between root view and its visible area:\nroot view height - status bar height - visible frame height = root view bottom - visible frame bottom, since status bar height equal to the top of root view visible frame. I used a little time to figure this out... I ran it some CastExceptions, but figured out that you can replace you LinearLayout in the layout.xml with the name of the class.Like this:That way you do not run into any cast issues.... and if you don\'t want to do this on every page, I recommend that you use "MasterPage in Android". See the link here:\nhttp://jnastase.alner.net/archive/2011/01/08/ldquomaster-pagesrdquo-in-android.aspxChecking the height of elements is not reliable because some keyboards like WifiKeyboard have zero height.Instead, you can use the callback result of showSoftInput() and hideSoftInput() to check for the status of the keyboard. Full details and example code athttp://www.ninthavenue.com.au/how-to-check-if-the-software-keyboard-is-shown-in-androidThe idea is, if you need to hide your keyboard and check soft input state at the same time, use the following solution:This method returns true if keyboard was shown before hiding.Instead of assuming the difference coding I did something like this, as I dint had menu options in my application.I found that a combination of @Reuben_Scratton\'s method along with @Yogesh\'s method seems to work best. Combining their methods would yield something like this:You can observe softkeyboard\'s hide by using activity\'s decorView.None of these solutions will work for Lollipop as is. In Lollipop activityRootView.getRootView().getHeight() includes the height of the button bar, while measuring the view does not. I\'ve adapted the best/simplest solution above to work with Lollipop. I used a slight variant of Reuban\'s answer, which proved to be more helpful in certain circumstances, especially with high resolution devices. The InputMethodManager has information about the soft keyboard.  You get it from an activity via:You might play around with that to see what it can tell you.  You can use it to show or hide the soft input...My answer is basically the same as Kachi\'s answer, but I wrapped it into a nice helper class to clean up the way it\'s used throughout my app.You can use this to detect keyboard changes anywhere throughout the app like this:Note: only use one of the "register" calls.  They all work the same and are only there for convenienceyou can try this, work great for me:I have just encountered a bug while using most of the solutions above that suggest adding a fixed number.S4 is has a high dpi which resulted in the navigation bar\'s height being 100px thus my app thinking that the keyboard is open all the time.So with all the new high res phones being released i believe using a hard coded value is not a good idea for long term.A better approach that i found after some testing on various screens and devices was to use percentage.\nGet the difference between decorView and ur app content and afterwards check what is the percentage of that difference. \nFrom the stats that i got, most nav bar(regardless of the size, resolution etc..) will take between 3% to 5% of the screen. Where as if the keyboard is open it was taking between 47% to 55% of the screen.As a conclusion my solution was to check if the diff is more than 10% then i assume its a keyboard open.I was having difficulty maintaining keyboard state when changing orientation of fragments within a viewpager. I\'m not sure why, but it just seems to be wonky and acts differently from a standard Activity.To maintain keyboard state in this case, first you should add android:windowSoftInputMode = "stateUnchanged" to your AndroidManifest.xml. You may notice, though, that this doesn\'t actually solve the entire problem -- the keyboard didn\'t open for me if it was previously opened before orientation change. In all other cases, the behavior seemed to be correct.Then, we need to implement one of the solutions mentioned here.\nThe cleanest one I found was George Maisuradze\'s--use the boolean callback from hideSoftInputFromWindow:I stored this value in my Fragment\'s onSaveInstanceState method and retrieved it onCreate. Then, I forcibly showed the keyboard in onCreateView if it had a value of true (it returns true if the keyboard is visible before actually hiding it prior to the Fragment destruction).Here\'s my solution, and it works. Instead of looking for pixel size just check that the height of the content view has changed or not:Don\'t make any hard code. Best way is you have to resize your views while on Get Focus on EditText with KeyBord Show.\nYou can do this adding resize property on activity into Manifest file using below code.android:windowSoftInputMode="adjustResize"There is a direct method to find this out. And, it does not require any Layout changes.\nSo, it works in immersive fullscreen mode, too.\nThe trick is that you try to hide or show the soft keyboard and capture the result of that try.\nNo panic, this does not really show or hide the keyboard. We just ask for the state.\nTo stay up-to-date, you can simply repeat the operation, e.g. every 200 milliseconds, using a Handler.\nYou find an implementation here: https://stackoverflow.com/a/27567074/2525452i think this method will help you to find out is keybord is visible or not.Reuben Scratton\'s new answer (calculate the HeightDiff  int heightDiff = activityRootView.getRootView().getHeight() - activityRootView.getHeight(); ) will not work in activity if you set the translucent status bar mode.if you use translucent status bar , activityRootView.getHeight() will never change weather the soft keyboard is visible. it will always return the height of activity and status bar.For example, Nexus 4, Android 5.0.1, set android:windowTranslucentStatus to true, it will return 1184 forever,  even the ime have opend. If you set android:windowTranslucentStatus to false, it will return Height correctly, if ime invisible,it return 1134(not include the status bar)\xe3\x80\x82close the ime, it will return 5xx maybe (depends on ime\'s height)I don\'t know weather this is a bug, I\'ve try on 4.4.4 and 5.0.1, the result is same.So, up to now, the second most agreed answer, Kachi\'s solution will be the most safe way to calcute the height of ime. Here\'s a copy:A method that doesn\'t need a LayoutListenerIn my case, I would like to save the state of the keyboard before replacing my Fragment. I call the method  hideSoftInputFromWindow from onSaveInstanceState, which closes the keyboard and returns me whether the keyboard was visible or not. This method is straightforward but may change the state of your keyboard.I know that this is a old post but I think this is the simplest approach that I know and my test device is Nexus 5. I haven\'t tried it in other devices. Hope that others will share their approach if they find my code is not good :)imm.hideSoftInputFromWindow returns boolean. Thanks,The above function is what I use to check if a Keyboard is visible.  If it is, then I close it.Below shows the two methods required.First, define the workable Window height in onCreate.Then, add a boolean method that gets the Window height at that instance.  If it does not match the original (assuming you are not changing it along the way...) then, the keyboard is open.Frotz!I know how exact you can determine if keyboard is hidden or not.This works for tablets. When navigationbar is shown horizontally.Think has a easy way, like this:You can also see if him is active in a specific view:The solution provided by Reuben Scratton and Kachi seems to rely on the pixel density of the devices, if you have a high density device the height difference can be bigger than 100 even with the keyboard down. A little work around that would be to see the initial height difference (with keyboard down) and then compare with the current difference.