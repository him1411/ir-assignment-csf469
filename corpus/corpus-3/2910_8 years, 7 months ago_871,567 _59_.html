I have a bunch of client point of sale (POS) systems that periodically send new sales data to one centralized database, which stores the data into one big database for report generation.The client POS is based on PHPPOS, and I have implemented a module that uses the standard XML-RPC library to send sales data to the service. The server system is built on CodeIgniter, and uses the XML-RPC and XML-RPCS libraries for the webservice component. Whenever I send a lot of sales data (as little as 50 rows from the sales table, and individual rows from sales_items pertaining to each item within the sale) I get the following error:128M is the default value in php.ini, but I assume that is a huge number to break. In fact, I have even tried setting this value to 1024M, and all it does is take a longer time to error out.As for steps I\'ve taken, I\'ve tried disabling all processing on the server-side, and have rigged it to return a canned response regardless of the input. However, I believe the problem lies in the actual sending of the data. I\'ve even tried disabling the maximum script execution time for PHP, and it still errors out. Thank you so much for your help!People, changing the memory_limit by ini_set(\'memory_limit\', \'-1\'); is NOT a solution at all. Please don\'t do that. Obviously php has a memory leak somewhere and you are telling the server to just use all the memory that it wants. The problem has not been fixed at all.  If you monitor your server, you will see that it is now probably using up most of the RAM and even swapping to disk.You should probably try to track down the exact bug in your code and fix it.ini_set(\'memory_limit\', \'-1\'); overrides the default PHP memory limit.The correct way is to edit your php.ini file.\nEdit memory_limit to your desire value.As from your question, 128M (which is the default limit) has been exceeded, so there is something seriously wrong with your code as it should not take that much.If you know why it takes that much and you want to allow it set memory_limit = 512M or higher and you should be good.The memory allocation for PHP can be adjusted permanently, or temporarily.You can permanently change the PHP memory allocation two ways.If you have access to your php.ini file, you can edit the value for memory_limit to your desire value.If you do not have access to your php.ini file (and your webhost allows it), you can override the memory allocation through your .htaccess file. Add php_value memory_limit 128M (or whatever your desired allocation is).You can adjust the memory allocation on the fly from within a PHP file. You simply have the code ini_set(\'memory_limit\', \'128M\'); (or whatever your desired allocation is). You can remove the memory limit (although machine or instance limits may still apply) by setting the value to "-1".It\'s very easy to get memory leaks in a PHP script - especially if you use abstraction, such as an ORM. Try using Xdebug to profile your script and find out where all that memory went.When adding 22.5 million records into an array with array_push I kept getting "memory exhausted" fatal errors at around 20M records using 4G as the memory limit in php.ini. To fix this I added the statement at the top of the file. Now everything is working fine. I do not know if php has a memory leak, that is not my job, nor do i care. I just have to get my job done, and this worked.The program is very simple:The fatal error points to line 3 until i boosted the memory limit, which\neliminated the error.EDIT: Corrected the syntax of ini_set.I kept getting this error, even with memory_limit set in php.ini, and the value reading out correctly with phpinfo().Changing it from this:To this:Fixed it in PHP 7.After enable these two lines.\nIt\'s started workingWhen you see the above error - especially if the (tried to allocate __ bytes) is a low value, that could be an indicator of an infinite loop, like a function that calls itself with no way out:You can properly fix this by changing memory_limit on fastcgi/fpmChange memory like from 128 to 512 see belowtoIn Drupal 7, you can modify the memory limit in the settings.php file located in your sites/default folder.  Around line 260, you\'ll see this:Even if your php.ini settings are high enough, you won\'t be able to consume more than 128MB if this isn\'t set in your Drupal settings.php file.Your site\'s root directory:-For Drupal users, this Chris Lane\'s answer of:works but we need to put it just after the openingtag in the index.php file in your site\'s root directory.PHP 5.3+ allows you to change the memory limit by placing a .user.ini file in the public_html folder.\nSimply create the above file and type the following line in it:Some cPanel hosts only accept this method.For those who are scratching their hairs to find out why in earth this little function should cause a memory leak, sometimes by a little mistake, a function starts recursively call itself for ever.For example a Proxy Class that has the same name for a function of the object that is going to proxy it.Sometimes you may forget to bring that little actualObjec member and because the Proxy actually has that doSomething method, PHP would\'t give you any error and for a large class, it could be hidden from the eyes for a couple of minutes to find out why it is leaking the memory.  Running the script like this (cron case for example): php5 /pathToScript/info.php produces the same error.The correct way: php5 -cli /pathToScript/info.phpCRASH page?\n(It happens when MySQL has to query large rows, by default the momory_limit is set to small, which was safer for the hardware)You can check your system existing memory status, before increasing php.iniHere i have increased it as following and then service httpd restart to fix the CRASH Page issue.If you\'re running a WHM-powered VPS (Virtual Private Server) you may find that you do not have permissions to edit PHP.INI directly; the system must do it. In the WHM host control panel, go to Service Configuration > PHP Configuration Editor, modify memory_limit:I find it useful when including or requiring:\ndbconnection.php, _functions.php\nin files that are actually processed,\n rather than including on header. \nWhich is included itself.  So if your header and footer is included, simply include all your functional files before header is included.I had the error below while running on a dataset smaller than had worked previously.As the search for the fault brought me here I thought I\'d mention that it\'s not always the technical solutions above but something more simple.  In my case it was Firefox. Before I ran the program it was already using 1,157M.\nTurns out that I\'d been watching a 50 minute video a bit at a time over a period of days and that messed things up.\nIt\'s the sort of fix that experts correct without even thinking about it, but for the likes of me it\'s worth baring in mind.Clear browser cache and try. error may be due to browser trying upload large file  or  damaged file into the server. not sure if this answer will be of any help, but when I removed the following lines from my code all worked OK!include_once(\'Net/SSH2.php\');\ninclude_once(\'Net/SFTP.php\');These lines were included in every file am running, when running the files one by one all worked OK, but when running all files together I got the memory leak issue.\nSomehow the "include_once" is not including things once, or am doing something wrong..