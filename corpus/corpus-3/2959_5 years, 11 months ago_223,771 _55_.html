I am using nginx on Rackspace cloud following a tutorial and having searched the net and so far can\'t get this sorted.I want www.mysite.com to go to mysite.com as normal in .htaccess for SEO and other reasons.My /etc/nginx/sites-available/www.example.com.vhost config:I have also triedI also tried. Both the second attempts give redirect loop errors.My DNS is setup as standard:(example IPs and folders have been used for examples and to help people in future). I use Ubuntu 11.From the documentation, "the right way is to define a separate server for example.org":For those who want a solution including https://...Note: I have not originally included https:// in my solution since we use loadbalancers and our https:// server is a high-traffic SSL payment server: we do not mix https:// and http://.To check the nginx version, use nginx -v. Strip www from url with nginx redirectSo you need to have TWO server codes.Add the www to the url with nginx redirectIf what you need is the opposite, to redirect from domain.com to www.domain.com, you can use this:As you can imagine, this is just the opposite and works the same way the first example. This way, you don\'t get SEO marks down, as it is complete perm redirect and move. The no WWW is forced and the directory shown!Actually you don\'t even need a rewrite.As my answer is getting more and more up votes but the above as well. You should never use a rewrite in this context. Why? Because nginx has to process and start a search. If you use return (which should be available in any nginx version) it directly stops execution. This is preferred in any context.Redirect both, non-SSL and SSL to their non-www counterpart:The $scheme variable will only contain http if your server is only listening on port 80 (default) and the listen option does not contain the ssl keyword. Not using the variable will not gain you any performance.Note that you need even more server blocks if you use HSTS, because the HSTS headers should not be sent over non-encrypted connections. Hence, you need unencrypted server blocks with redirects and encrypted server blocks with redirects and HSTS headers.Redirect everything to SSL (personal config on UNIX with IPv4, IPv6, SPDY, ...):I guess you can imagine other compounds with this pattern now by yourself.More of my configs? Go here and here.You may find out you want to use the same config for more domains.Following snippet removes www before any domain:Here\'s how to do it for multiple www to no-www server names (I used this for subdomains):This solution comes from my personal experience. We used several Amazon S3 buckets and one server for redirecting non-www to www domain names to match S3 "Host" header policy.I used the following configuration for nginx server:This matches all domain names pointed to the server starting with whatever but www. and redirects to www.<domain>. In the same manner you can do opposite redirect from www to non-www.You need two server blocks. Put these into your config file eg /etc/nginx/sites-available/sitenameLet\'s say you decide to have http://example.com as the main address to use.Your config file should look like this:The first server block will hold the instructions to redirect any requests with the \'www\' prefix. It listens to requests for the URL with \'www\' prefix and redirects. It does nothing else.The second server block will hold your main address \xe2\x80\x94 the URL you want to use. All other settings go here like root, index, location, etc. Check the default file for these other settings you can include in the server block.The server needs two DNS A records.For ipv6 create the pair of AAAA records using your-ipv6-address.Unique format:not sure if anyone notice it may be correct to return a 301 but browsers choke on it to doingis faster than:in order to make nginx recommended method with return 301 $scheme://example.com$request_uri; work with Ghost you will need to add in your main server block:try thisOther way:\nNginx no-www to wwwand www to no-wwwRedirect non-www to wwwFor Single Domain : For All Domains : Redirect www to non-www\nFor Single Domain:For All Domains :If you are having trouble getting this working, you may need to add the IP address of your server. For example:where XXX.XXX.XXX.XXX is the IP address (obviously).Note: ssl crt and key location must be defined to properly redirect https requestsDon\'t forget to restart nginx after making the changes: