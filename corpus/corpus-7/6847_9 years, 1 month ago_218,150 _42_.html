This is a follow-on question to the How do you use ssh in a shell script? question.  If I want to execute a command on the remote machine that runs in the background on that machine, how do I get the ssh command to return?  When I try to just include the ampersand (&) at the end of the command it just hangs.  The exact form of the command looks like this:Any ideas?  One thing to note is that logins to the the target machine always produce a text banner and I have SSH keys set up so no password is required.I had this problem in a program I wrote a year ago -- turns out the answer is rather complicated. You\'ll need to use nohup as well as output redirection, as explained in the wikipedia artcle on nohup, copied here for your convenience. Nohuping backgrounded jobs is for\n  example useful when logged in via SSH,\n  since backgrounded jobs can cause the\n  shell to hang on logout due to a race\n  condition [2]. This problem can also\n  be overcome by redirecting all three\n  I/O streams:This has been the cleanest way to do it for me:-The only thing running after this is the actual command on the remote machineOutput needs to be redirected with &>/dev/null which redirects both stderr and stdout to /dev/null and is a synonym of >/dev/null 2>/dev/null or >/dev/null 2>&1.The best way is to use sh -c \'( ( command ) & )\' where command is anything.You can also use nohup directly to launch the shell:Another trick is to use nice to launch the command/shell:I just wanted to show a working example that you can cut and paste:If you don\'t/can\'t keep the connection open you could use screen, if you have the rights to install it.To detach the screen session: ctrl-a dTo list screen sessions:To reattach a session:Note that screen can also create multiple shells within each session.  A similar effect can be achieved with tmux.To detach the tmux session: ctrl-b dTo list screen sessions:To reattach a session:The default tmux control key, \'ctrl-b\', is somewhat difficult to use but there are several example tmux configs that ship with tmux that you can try.I think you\'ll have to combine a couple of these answers to get what you want. If you use nohup in conjunction with the semicolon, and wrap the whole thing in quotes, then you get:which seems to work for me. With nohup, you don\'t need to append the & to the command to be run. Also, if you don\'t need to read any of the output of the command, you can useto redirect all output to /dev/null.Quickest and easiest way is to use the \'at\' command:ssh user@target "at now -f /home/foo.sh"This worked for me may times:Actually, whenever I need to run a command on a remote machine that\'s complicated, I like to put the command in a script on the destination machine, and just run that script using ssh.For example:And then I just run this command on the source machine:I was trying to do the same thing, but with the added complexity that I was trying to do it from Java.  So on one machine running java, I was trying to run a script on another machine, in the background (with nohup).From the command line, here is what worked: (you may not need the "-i keyFile" if you don\'t need it to ssh to the host)Note that to my command line, there is one argument after the "-c", which is all in quotes.  But for it to work on the other end, it still needs the quotes, so I had to put escaped quotes within it.From java, here is what worked:It took a bit of trial & error to get this working, but it seems to work well now.I think this is what you need:\nAt first you need to install sshpass on your machine.\nthen you can write your own script:First follow this procedure: Log in on A as user a and generate a pair of authentication keys. Do not enter a passphrase:Now use ssh to create a directory ~/.ssh as user b on B. (The directory may already     exist, which is fine):Finally append a\'s new public key to b@B:.ssh/authorized_keys and enter b\'s password one last time:From now on you can log into B as b from A as a without password:then this will work without entering a password ssh b@B "cd /some/directory; program-to-execute &"