How do you add an in-app purchase to an iOS app? What are all the details and is there any sample code? This is meant to be a catch-all of sorts for how to add in-app purchases to iOS appsThe best way to get an in-app purchase working for iOS 10 (and iOS 9, 8 and 7) in Xcode 5+ is to do the following:It could take a few hours for your product ID to register in iTunesConnect, so be patient.Now that you\'ve set up your in-app purchase information on iTunesConnect, go into your Xcode project, and go to the application manager (blue page-like icon at the top of where your methods and header files are) click on your app under targets (should be the first one) then go to general. At the bottom, you should see linked frameworks and libraries click the little plus symbol and add the framework StoreKit.framework If you don\'t do this, the in-app purchase will NOT work!If you are using Objective-C as the language for your app, you can skip these five steps. Otherwise, if you are using Swift, do the following:Create a new .h (header) file by going to File > New > File... (Command \xe2\x8c\x98 + N). This file will be referred to as "Your .h file" in the rest of the tutorialWhen prompted, click Create Bridging Header. This will be our bridging header file. If you are not prompted, go to step 3. If you are prompted, skip step 3 and go directly to step 4.Create another .h file named Bridge.h in the main project folder, Then go to the Application Manager (the blue page-like icon), then select your app in the Targets section, and click Build Settings. Find the option that says Swift Compiler - Code Generation, and then set the Objective-C Bridging Header option to Bridge.hIn your bridging header file, add the line #import "MyObjectiveCHeaderFile.h", where MyObjectiveCHeaderFile is the name of the header file that you created in step one. So, for example, if you named your header file InAppPurchase.h, you would add the line #import "InAppPurchase.h" to your bridge header file.Create a new Objective-C Methods (.m) file by going to File > New > File... (Command \xe2\x8c\x98 + N). Name it the same as the header file you created in step 1. For example, if you called the file in step 1 InAppPurchase.h, you would call this new file InAppPurchase.m. This file will be referred to as "Your .m file" in the rest of the tutorial.Now we\'re going to get into the actual coding. Add the following code into your .h file:Next, you need to import the StoreKit framework into your .m file, as well as add SKProductsRequestDelegate and SKPaymentTransactionObserver after your @interface declaration:and now add the following into your .m file, this part gets complicated, so I suggest that you read the comments in the code: Now you want to add your code for what will happen when  the user finishes the transaction, for this tutorial, we use removing adds, you will have to add your own code for what happens when the banner view loads.If you don\'t have ads in your application, you can use any other thing that you want. For example, we could make the color of the background blue. To do this we would want to use:Now, somewhere in your viewDidLoad method, you\'re going to want to add the following code:Now that you have added all the code, go into your .xib or storyboard file, and add two buttons, one saying purchase, and the other saying restore. Hook up the tapsRemoveAds IBAction to the purchase button that you just made, and the restore IBAction to the restore button. The restore action will check if the user has previously purchased the in-app purchase, and give them the in-app purchase for free if they do not already have it.Next, go into iTunesConnect, and click Users and Roles then click the Sandbox Testers header, and then click the + symbol on the left where it says Testers. You can just put in random things for the first and last name, and the e-mail does not have to be real - you just have to be able to remember it. Put in a password (which you will have to remember) and fill in the rest of the info. I would recommend that you make the Date of Birth a date that would make the user 18 or older. App Store Territory HAS to be in the correct country. Next, log out of your existing iTunes account (you can log back in after this tutorial).Now, run your application on your iOS device, if you try running it on the simulator, the purchase will always error, you HAVE TO run it on your iOS device. Once the app is running, tap the purchase button. When you are prompted to log into your iTunes account, log in as the test user that we just created. Next,when it asks you to confirm the purchase of 99\xc2\xa2 or whatever you set the price tier too, TAKE A SCREEN SNAPSHOT OF IT this is what your going to use for your screenshot for review on iTunesConnect. Now cancel the payment.Now, go to iTunesConnect, then go to My Apps > the app you have the In-app purchase on > In-App Purchases. Then click your in-app purchase and click edit under the in-app purchase details. Once you\'ve done that, import the photo that you just took on your iPhone into your computer, and upload that as the screenshot for review, then, in review notes, put your TEST USER e-mail and password. This will help apple in the review process.After you have done this, go back onto the application on your iOS device, still logged in as the test user account, and click the purchase button. This time, confirm the payment Don\'t worry, this will NOT charge your account ANY money, test user accounts get all in-app purchases for free After you have confirmed the payment, make sure that what happens when the user buys your product actually happens. If it doesn\'t, then thats going to be an error with your doRemoveAds method. Again, I recommend using changing the background to blue for testing the in-app purchase, this should not be your actual in-app purchase though. If everything works and you\'re good to go! Just make sure to include the in-app purchase in your new binary when you upload it to iTunesConnect!Logged: No Products AvailableThis could mean three things:If it doesn\'t work the first time, don\'t get frustrated! Don\'t give up! It took me about 5 hours straight before I could get this working, and about 10 hours searching for the right code! If you use the code above exactly, it should work fine. Feel free to comment if you have any questions at all.I hope this helps to all of those hoping to add an in-app purchase to their iOS application. Cheers!Just translate Jojodmo code to Swift:RMStore is a lightweight iOS library for In-App Purchases. It wraps StoreKit API and provides you with handy blocks for asynchronous requests. Purchasing a product is as easy as calling a single method. For the advanced users, this library also provides receipt verification, content downloads and transaction persistence.  I know I am quite late to post this, but I share similar experience when I learned the ropes of IAP model.In-app purchase is one of the most comprehensive workflow in iOS implemented by Storekit framework. The entire documentation is quite clear if you patience to read it, but is somewhat advanced in nature of technicality.To summarize:1 - Request the products - use SKProductRequest & SKProductRequestDelegate classes to issue request for Product IDs and receive them back from your own itunesconnect store.These SKProducts should be used to populate your store UI which the user can use to buy a specific product.2 - Issue payment request - use SKPayment & SKPaymentQueue to add payment to the transaction queue.3 - Monitor transaction queue for status update - use SKPaymentTransactionObserver Protocol\'s updatedTransactions method to monitor status:4 - Restore button flow - use SKPaymentQueue\'s restoreCompletedTransactions to accomplish this - step 3 will take care of the rest, along with SKPaymentTransactionObserver\'s following methods:Here is a step by step tutorial (authored by me as a result of my own attempts to understand it) that explains it. At the end it also provides code sample that you can directly use.Here is another one I created to explain certain things that only text could describe in better manner.