What are some of the lesser know, but important and useful features of Windows batch files?Guidelines:Clarification: We refer here to scripts that are processed by cmd.exe, which is the default on WinNT variants.(See also: Windows batch files: .bat vs .cmd?)Line continuation:Takes you to the directory specified by path.Takes you back to the directory you "pushed" from.Not sure how useful this would be in a batch file, but it\'s a very convenient command to use in the command prompt:This will open up Windows Explorer in the "some_directory" folder.I have found this a great time-saver.I have always found it difficult to read comments that are marked by a keyword on each line:Easier to read:Variable substrings:The FOR command!  While I hate writing batch files, I\'m thankful for it.would parse each line in myfile.txt, ignoring lines that begin with a semicolon, passing the 2nd and 3rd token from each line to the for body, with tokens delimited by commas and/or spaces.\nNotice the for body statements reference %i to get the 2nd token, %j to get the 3rd token, and %k to get all remaining tokens after the 3rd.You can also use this to iterate over directories, directory contents, etc...Rather than litter a script with REM or :: lines, I do the following at the top of each script:Note how you can use the pipe and redirection characters without escaping them.The path (with drive) where the script is : ~dp0The %~dp0 piece was mentioned already, but there is actually more to it:\nthe character(s) after the ~ define the information that is extracted.\nNo letter result in the return of the patch file name\nd - returns the drive letter\np - returns the path\ns - returns the short path\nx - returns the file extension\nSo if you execute the script test.bat below from the c:\\Temp\\long dir name\\ folder,you get the following outputAnd if a parameter is passed into your script as in\ntest c:\\temp\\mysrc\\test.cpp\nthe same manipulations can be done with the %1 variable.But the result of the expansion of %0 depends on the location!\nAt the "top level" of the batch it expands to the current batch filename.\nIn a function (call), it expands to the function name.The output is (the batchfile is started with myBatch.bat )By using CALL, EXIT /B, SETLOCAL & ENDLOCAL you can implement subroutines with local variables.example:This will printeven though :sub modifies x.Sneaky trick to wait N seconds (not part of cmd.exe but isn\'t extra software since it comes with Windows), see the ping line.  You need N+1 pings since the first ping goes out without a delay.Escaping the "plumbing":Being able to run commands and process the output (like backticks of \'$()\' in bash).If there are spaces in filenames, use this:Creating an empty file:To hide all output from a command redirect to >nul 2>&1.For example, the some command line programs display output even if you redirect to >nul. But, if you redirect the output like the line below, all the output will be suppressed.EDIT: See Ignoring the output of a command for an explanation of how this works.Stops execution and displays the following prompt:Useful if you want to run a batch by double-clicking it in Windows Explorer and want to actually see the output rather than just a flash of the command window.The equivalent of the bash (and other shells)which outputs "Hello" without a trailing newline. A cmd hack to do this:set /p is a way to prompt the user for input. It emits the given string and then waits, (on the same line, i.e., no CRLF), for the user to type a response.<nul simply pipes an empty response to the set /p command, so the net result is the emitted prompt string. (The variable used remains unchanged due to the empty reponse.)Problems are: It\'s not possible to output a leading equal sign, and on Vista leading whitespace characters are removed, but not on XP.Search and replace when setting environment variables:...removes the "/" from a date for use in timestamped file names.and substrings too...Integer arithmetic:Command separators:At the 2nd line, the command after && only runs if the first command is successful.At the 3rd line, the command after || only runs if the first command failed.Output a blank line:You can chain if statements to get an effect like a short-circuiting boolean `and\'.To quickly convert an Unicode text file (16bit/char) to a ASCII DOS file (8bit/char).as a bonus, if possible, characters are correctly mapped.if block structure:Delayed expansion of variables (with substrings thrown in for good measure):Doesn\'t provide much functionality, but you can use the title command for a couple of uses, like providing status on a long script in the task bar, or just to enhance user feedback.Don\'t have an editor handy and need to create a batch file?Just type away the commands, press enter for a new line.\nPress Ctrl-Z and Enter to close the file.example of string subtraction on date and time to get file named "YYYY-MM-DD HH:MM:SS.txt"echo test > "%date:~0,4%-%date:~5,2%-%date:~8,2% %time:~0,2%_%time:~3,2%_%time:~6,2%.txt"I use color to indicate if my script end up successfully, failed, or need some input by changing color of text and background. It really helps when you have some machine in reach of your view but quite far awaycolor XYwhere X and Y is hex value from 0 to F, where X - background, Y - text, when X = Y color will not change.color Zchanges text color to \'Z\' and sets black background, \'color 0\' won\'t work for names of colors call color ?Total control over output with spacing and escape characters.:TheSoftwareJedi already mentioned the for command, but I\'m going to mention it again as it is very powerful.The following outputs the current date in the format YYYYMMDD, I use this when generating directories for backups.