I would like to simulate packet delay and loss for UDP and TCP on Linux to measure the performance of an application.  Is there a simple way to do this?netem leverages functionality already built into Linux and userspace utilities to simulate networks.  This is actually what Mark\'s answer refers to, by a different name.The examples on their homepage already show how you can achieve what you\'ve asked for:This is the simplest example, it just adds a fixed amount of delay to all packets going out of the local Ethernet.Now a simple ping test to host on the local network should show an increase of 100 milliseconds. The delay is limited by the clock resolution of the kernel (Hz). On most 2.4 systems, the system clock runs at 100\xc2\xa0Hz which allows delays in increments of 10\xc2\xa0ms. On 2.6, the value is a configuration parameter from 1000 to 100\xc2\xa0Hz.Later examples just change parameters without reloading the qdiscReal wide area networks show variability so it is possible to add random variation.This causes the added delay to be 100 \xc2\xb1 10\xc2\xa0ms. Network delay variation isn\'t purely random, so to emulate that there is a correlation value as well.This causes the added delay to be 100 \xc2\xb1 10\xc2\xa0ms with the next random element depending 25% on the last one. This isn\'t true statistical correlation, but an approximation.Typically, the delay in a network is not uniform. It is more common to use a something like a normal distribution to describe the variation in delay. The netem discipline can take a table to specify a non-uniform distribution.The actual tables (normal, pareto, paretonormal) are generated as part of the iproute2 compilation and placed in /usr/lib/tc; so it is possible with some effort to make your own distribution based on experimental data.Random packet loss is specified in the \'tc\' command in percent. The smallest possible non-zero value is:2\xe2\x88\x9232 = 0.0000000232%This causes 1/10th of a percent (i.e. 1 out of 1000) packets to be randomly dropped.An optional correlation may also be added. This causes the random number generator to be less random and can be used to emulate packet burst losses.This will cause 0.3% of packets to be lost, and each successive probability depends by a quarter on the last one.Probn = 0.25 \xc3\x97 Probn-1 + 0.75 \xc3\x97 RandomNote that you should use tc qdisc add if you have no rules for that interface or tc qdisc change if you already have rules for that interface. Attempting to use tc qdisc change on an interface with no rules will give the error RTNETLINK answers: No such file or directory.For dropped packets I would simply use iptables and the statistic module.Above will drop an incoming packet with a 1% probability. Be careful, anything above about 0.14 and most of you tcp connections will most likely stall completely.Take a look at man iptables and search for "statistic" for more information.One of my colleagues uses tc to do this. Refer to the man page for more information. You can see an example of its usage here.iptables(8) has a statistics module that can be used to match every nth packet. To drop this packet, just append -j DROP.This tutorial on networking physics simulations contains a C++ class in the sample code for simulating latency and packet loss in a UDP connection and may be of guidance. See the public latency and packetLoss variables of the Connection class found in the Connection.h file of the downloadable source code.Haven\'t tried it myself, but this page has a list of plugin modules that run in Linux\' built in iptables IP filtering system. One of the modules is called "nth", and allows you to set up a rule that will drop a configurable rate of the packets. Might be a good place to start, at least.You can try http://snad.ncsl.nist.gov/nistnet/\nIt\'s quite old NIST project (last release 2005), but it works for me.One of the most used tool in the scientific community to that purpose is DummyNet. Once you have installed the ipfw kernel module, in order to introduce 50ms propagation delay between 2 machines simply run these commands:In order to also introduce 50% of packet losses you have to run:Here more details.An easy to use network fault injection tool is Saboteur. It can simulate: