Is there a simple shell command/script that supports excluding certain files/folders from being archived?I have a directory that need to be archived with a sub directory that has a number of very large files I do not need to backup.Not quite solutions:The tar --exclude=PATTERN command matches the given pattern and excludes those files, but I need specific files & folders to be ignored (full file path), otherwise valid files might be excluded.I could also use the find command to create a list of files and exclude the ones I don\'t want to archive and pass the list to tar, but that only works with for a small amount of files. I have tens of thousands.I\'m beginning to think the only solution is to create a file with a list of files/folders to be excluded, then use rsync with --exclude-from=file to copy all the files to a tmp directory, and then use tar to archive that directory.Can anybody think of a better/more efficient solution?EDIT: cma\'s solution works well. The big gotcha is that the --exclude=\'./folder\' MUST be at the beginning of the tar command. Full command (cd first, so backup is relative to that directory):You can have multiple exclude options for tar soetc will work. Make sure to put --exclude before the source and destination items. You can exclude directories with --exclude for tar.If you want to archive everything except /usr you can use:In your case perhaps something likePossible options to exclude files/directories from backup using tar:Exclude files using multiple patternsExclude files using an exclude file filled with a list of patternsExclude files using tags by placing a tag file in any directory that should be skippedold question with many answers, but I found that none were quite clear enough for me, so I would like to add my try.if you have the following structurewith following file/foldersso, you want to make a tar file that contain everyting inside /home/ftp/mysite (to move the site to a new server), but file3 is just junk, and everything in folder3 is also not needed, so we will skip those two.we use the formatwhere the c = create, z = zip, and v = verbose (you can see the files as they are entered, usefull to make sure none of the files you exclude are being added). and f= file.so, my command would look like thisnote the files/folders excluded are relatively to the root of your tar (I have tried full path here relative to / but I can not make that work). hope this will help someone (and me next time I google it)I\'ve experienced that, at least with the Cygwin version of tar I\'m using ("CYGWIN_NT-5.1 1.7.17(0.262/5/3) 2012-10-19 14:39 i686 Cygwin" on a Windows XP Home Edition SP3 machine), the order of options is important.While this construction worked for me:that one didn\'t work:This, while tar --help reveals the following:So, the second command should also work, but apparently it doesn\'t seem to be the case...Best rgds,I found this somewhere else so I won\'t take credit, but it worked better than any of the solutions above for my mac specific issues (even though this is closed):You can use standard "ant notation" to exclude directories relative.\nThis works for me and excludes any .git or node_module directories.myInputFile.txt Contains:\n/dev2/java\n/dev2/javascriptUse the find command in conjunction with the tar append (-r) option.   This way you can add files to an existing tar in a single step, instead of a two pass solution (create list of files, create tar).To avoid possible \'xargs: Argument list too long\' errors due to the use of find ... | xargs ... when processing tens of thousands of files, you can pipe the output of find directly to tar using find ... -print0 | tar --null ....This exclude pattern handles filename suffix like png or mp3 as well as directory names like .git and node_modulesAfter reading this thread, I did a little testing on RHEL 5 and here are my results for tarring up the abc directory:This will exclude the directories error and logs and all files under the directories:Adding a wildcard after the excluded directory will exclude the files but preserve the directories:You can use cpio(1) to create tar files. cpio takes the files to archive on stdin, so if you\'ve already figured out the find command you want to use to select the files the archive, pipe it into cpio to create the tar file:You can also use one of the "--exclude-tag" options depending on your needs:The folder hosting the specified FILE will be excluded.I agree the --exclude flag is the right approach.A word of warning for a side effect that I did not find immediately obvious:\nThe exclusion of \'fileA\' in this example will search for \'fileA\' RECURSIVELY!Example:A directory with a single subdirectory containing a file of the same name (data.txt)If using --exclude=\'data.txt\' the archive will not contain EITHER data.txt file. This can cause unexpected results if archiving third party libraries, such as a node_modules directory.To avoid this issue make sure to give the entire path, like --exclude=\'./dirA/data.txt\' For Mac OSX I had to do tar -zcv --exclude=\'folder\' -f theOutputTarFile.tar folderToTar Note the -f after the --exclude=Your best bet is to use find with tar, via xargs (to handle the large number of arguments).  For example:Possible redundant answer but since I found it useful, here it is:While a FreeBSD root (i.e. using csh) I wanted to copy my whole root filesystem to /mnt but without /usr and (obviously) /mnt. This is what worked (I am at /):My whole point is that it was necessary (by putting the ./) to specify to tar that the excluded directories where part of the greater directory being copied.My \xe2\x82\xac0.02  I had no luck getting tar to exclude a 5 Gigabyte subdirectory a few levels deep. In the end, I just used the unix Zip command. It worked a lot easier for me.So for this particular example from the original post\n(tar --exclude=\'./folder\' --exclude=\'./upload/folder2\' -zcvf /backup/filename.tgz .  )The equivalent would be:zip -r /backup/filename.zip . -x upload/folder/**\\* upload/folder2/**\\*(NOTE: Here is the post I originally used that helped me https://superuser.com/questions/312301/unix-zip-directory-but-excluded-specific-subdirectories-and-everything-within-t) gnu tar v 1.26 the --exclude needs to come after archive file and backup directory arguments, should have no leading or trailing slashes, and prefers no quotes (single or double).  So relative to the PARENT directory to be backed up, it\'s:tar cvfz /path_to/mytar.tgz ./dir_to_backup --exclude=some_path/to_excludeCheck it outThe following bash script should do the trick. It uses the answer given here by Marcus Sundman.This will print out the command you need and you can just copy and paste it back in. There is probably a more elegant way to provide it directly to the command line.Just change *.CC for any other common extension, file name or regex you want to exclude and this should still work.EDITJust to add a little explanation; find generates a list of files matching the chosen regex (in this case *.CC). This list is passed via xargs to the echo command. This prints --exclude \'one entry from the list\'. The slashes () are escape characters for the \' marks.