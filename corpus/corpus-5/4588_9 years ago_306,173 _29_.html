I have a shell script that executes a number of commands. How do I make the shell script exit if any of the commands exit with a non-zero exit code?After each command, the exit code can be found in the $? variable so you would have something like:You need to be careful of piped commands since the $? only gives you the return code of the last element in the pipe so, in the code:will not return an error code if the file doesn\'t exist (since the sed part of the pipeline actually works, returning 0).The bash shell actually provides an array which can assist in that case, that being PIPESTATUS. This array has one element for each of the pipeline components, that you can access individually like ${PIPESTATUS[0]}:Note that this is getting you the result of the false command, not the entire pipeline. You can also get the entire list to process as you see fit:If you wanted to get the largest error code from a pipeline, you could use something like:This goes through each of the PIPESTATUS elements in turn, storing it in rc if it was greater than the previous rc value.If you want to work with $?, you\'ll need to check it after each command, since $? is updated after each command exits.  This means that if you execute a pipeline, you\'ll only get the exit code of the last process in the pipeline.Another approach is to do this:If you put this at the top of the shell script, it looks like bash will take care of this for you.  As a previous poster noted, "set -e" will cause bash to exit with an error on any simple command.  "set -o pipefail" will cause bash to exit with an error on any command in a pipeline as well.See here or here for a little more discussion on this problem.  Here is the bash manual section on the set builtin."set -e" is probably the easiest way to do this. Just put that before any commands in your program.If you just call exit in the bash with no parameters, it will return the exit code of the last command. Combined with OR the bash should only invoke exit, if the previous command fails. But I haven\'t tested this. The Bash will also store the exit code of the last command in the variable $?.http://cfaj.freeshell.org/shell/cus-faq-2.html#11How do I get the exit code of cmd1 in cmd1|cmd2First, note that cmd1 exit code could be non-zero and still don\'t\nmean an error. This happens for instance inyou might observe a 141 (or 269 with ksh93) exit status of cmd1,\nbut it\'s because cmd was interrupted by a SIGPIPE signal when\nhead -1 terminated after having read one line.To know the exit status of the elements of a pipeline\ncmd1 | cmd2 | cmd3a. with zsh:The exit codes are provided in the pipestatus special array.\n   cmd1 exit code is in $pipestatus[1], cmd3 exit code in\n   $pipestatus[3], so that $? is always the same as\n   $pipestatus[-1].b. with bash:The exit codes are provided in the PIPESTATUS special array.\n   cmd1 exit code is in ${PIPESTATUS[0]}, cmd3 exit code in\n   ${PIPESTATUS[2]}, so that $? is always the same as\n   ${PIPESTATUS: -1}....For more details see the following link.for bash:In bash this is easy, just tie them together with &&:You can also use the nested if construct: