How can I determine the IP address of a given request from within a controller? For example (in express):In your request object there is a property called connection, which is a net.Socket object. The net.Socket object has a property remoteAddress, therefore you should be able to get the IP with this call:See documentation for http and netEDITAs @juand points out in the comments, the correct method to get the remote IP, if the server is behind a proxy, is request.headers[\'x-forwarded-for\']Note that sometimes you can get more than one ip address in req.headers[\'x-forwarded-for\'].The general format of the field is:x-forwarded-for: client, proxy1, proxy2, proxy3where the value is a comma+space separated list of IP addresses, the left-most being the original client, and each successive proxy that passed the request adding the IP address where it received the request from. In this example, the request passed through proxy1, proxy2, and then proxy3. proxy3 appears as remote address of the request.You can stay DRY and just use node-ipware that supports both IPv4 and IPv6.Install:In your app.js or middleware:It will make the best attempt to get the user\'s IP address or returns 127.0.0.1 to indicate that it could not determine the user\'s IP address. Take a look at the README file for advanced options.You can use request-ip, to retrieve a user\'s ip address. It handles quite a few of the different edge cases, some of which are mentioned in the other answers.Disclosure: I created this module Install:In your app:Hope this helpsFollowing Function has all the cases covered will help request.headers[\'x-forwarded-for\'] || request.connection.remoteAddressIf the x-forwarded-for header is there then use that, otherwise use the .remoteAddress property. The x-forwarded-for header is added to requests that pass through load balancers (or other types of proxy) set up for HTTP or HTTPS (it\'s also possible to add this header to requests when balancing at a TCP level using proxy protocol). This is because the request.connection.remoteAddress property will contain the private ip address of the load balancer rather than the public ip address of the client. By using an OR statement, in the order above, you check for the existence of an x-forwarded-for header and use it if it exists otherwise use the request.connection.remoteAddress. If you\'re using express version 3.x or greater, you can use the trust proxy setting (http://expressjs.com/api.html#trust.proxy.options.table) and it will walk the chain of addresses in the x-forwarded-for header and put the latest ip in the chain that you\'ve not configured as a trusted proxy into the ip property on the req object.req.ipI was looking this up then I was like wait, I\'m using express. Duh.Had the same problem...im also new at javascript but i solved this with req.connection.remoteAddress; that gave me th IP address (but in ipv6 format ::ffff.192.168.0.101 ) and then .slice to remove the 7 first digits.