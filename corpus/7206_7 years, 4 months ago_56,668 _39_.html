Well, first I should probably ask if this is browser dependent.I\'ve read that if an invalid token is found, but the section of code is valid until that invalid token, a semicolon is inserted before the token if it is preceded by a line break.\nHowever, the common example cited for bugs caused by semicolon insertion is:which doesn\'t seem to follow this rule, since _a would be a valid token. On the other hand, breaking up call chains works as expected:Does anyone have a more in-depth description of the rules?First of all you should know which statements are affected by the automatic semicolon insertion (also known as ASI for brevity):The concrete rules of ASI, are described in the specification:Three cases are described:When a token (LineTerminator or }) is encountered that is not allowed by the grammar, a semicolon is inserted before it if: E.g.:The NumericLiteral 1 meets the first condition, the following token is a line terminator.\nThe 2 meets the second condition, the following token is }.When the end of the input stream of tokens is encountered and the parser is unable to parse the input token stream as a single complete Program, then a semicolon is automatically inserted at the end of the input stream.E.g.:This case occurs when a token is allowed by some production of the grammar, but the production is a restricted production, a semicolon is automatically inserted before the restricted token.Restricted productions:The classic example, with the ReturnStatement:Straight from the ECMA-262, Fifth Edition ECMAScript Specification:There are three basic rules of semicolon insertion:However, there is an additional overriding condition on  the preceding rules: a semicolon is never inserted automatically if the semicolon would then be parsed as an empty statement or if that semicolon would become one of the two semicolons in the header of a for statement (see 12.6.3).I could not understand those 3 rules in the specs too well -- hope to have something that is more plain English -- but here is what I gathered from JavaScript: The Definitive Guide, 6th Edition, David Flanagan, O\'Reilly, 2011:Quote:JavaScript does not treat every line break as a semicolon: it usually treats line breaks as semicolons only if it can\xe2\x80\x99t parse the code without the semicolons.Another quote: for the codeJavaScript does not treat the second line break as a semicolon because it can continue parsing the longer statement a = 3;and:two exceptions to the general rule that JavaScript interprets line breaks as semicolons when it cannot parse the second line as a continuation of the statement on the first line. The first exception involves the return, break, and continue statements... If a line break appears after any of these words ... JavaScript will always interpret that line break as a semicolon.... The second exception involves the ++ and \xe2\x88\x92\xe2\x88\x92 operators ... If you want to use either of these operators as postfix operators, they must appear on the same line as the expression they apply to. Otherwise, the line break will be treated as a semicolon, and the ++ or -- will be parsed as a prefix operator applied to the code that follows. Consider this code, for example:It is parsed as x; ++y;, not as x++; ySo I think to simplify it, that means:In general, JavaScript will treat it as continuation of code as long as it makes sense -- except 2 cases:  (1) after some keywords like return, break, continue, and (2) if it sees ++ or -- on a new line, then it will add the ; at the end of the previous line.The part about "treat it as continuation of code as long as it makes sense" makes it feel like regular expression\'s greedy matching.With the above said, that means for return with a line break, the JavaScript interpreter will insert a ;(quoted again: If a line break appears after any of these words [such as return] ... JavaScript will always interpret that line break as a semicolon)and due to this reason, the classic example ofwill not work as expected, because the JavaScript interpreter will treat it as:There has to be no line-break immediately after the return:for it to work properly.  And you may insert a ; yourself if you were to follow the rule of using a ; after any statement:Regarding semicolon insertion and the var statement, beware forgetting the comma when using var but spanning multiple lines.  Somebody found this in my code yesterday:It ran but the effect was that the srcIds declaration/assignment was global because the local declaration with var on the previous line no longer applied as that statement was considered finished due to automatic semi-colon insertion.