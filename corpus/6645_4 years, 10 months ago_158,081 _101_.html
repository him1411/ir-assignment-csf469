After I did brew update and brew upgrade, my postgres got some problem. I tried to uninstall postgres and install again, but it didn\'t work as well. This is the error message.(I also got this error message when I try to do rake db:migrate)How can I solve it?Mac version:      Mountain lion.homebrew version: 0.9.3postgres version: psql (PostgreSQL) 9.2.1And this is what I did.Now, after I reinstalled howbrew,when I use $ psql, It doesn\'t show any error message.But I run rake db:migrate in my rails app, it shows:Finally I find the solution.This solution is little tricky, but it works. Hope anyone have a better solutionUpdateThis works for me as well.Had a similar problem; a pid file was blocking postgres from starting up. To fix it:rm /usr/local/var/postgres/postmaster.pidand then all is well.This can sometimes be an issue with a postgres upgrade.  In my case, it happened when upgrading from 9.3 to 9.4.See http://www.postgresql.org/docs/9.4/static/upgrading.htmlOS X/Homebrew:Try running postgres -D /usr/local/var/postgres -- it will give you a much more verbose output if postgres fails to start.In my case, running rm -rf /usr/local/var/postgres && initdb /usr/local/var/postgres -E utf8 removed my old databases and then reinitialized the postgres db schema.  Thanks to https://github.com/Homebrew/homebrew/issues/35240 for that solution.After regenerating my databases (with rake db:create) everything worked fine again.Found a solution that worked for me here:https://dba.stackexchange.com/questions/75214/psql-could-not-connect-to-server-no-such-file-or-directoryYou basically run the following command to manually start the server:For anyone reading this and using Postgres.app, you may need host: localhost in your database.yml. http://postgresapp.com/documentation#toc_3On Yosemite, if the pid file is blocking Postgres from starting and you have a launchctl daemon trying (and failing) to load the database daemons, then you\'ll need to unload the the plist file:Then remove the pid fileThen reload the launchctl daemonCheck that the socket file exists.If it doesn\'t then check your postgresql.conf for unix_socket_directory change.If installing and uninstalling postgres with brew doesn\'t work for you, look at the logs of your postgresql installation or:if you see this kind of output:Then try the following:Then start the server:Sourceworked for me!This happened to me when I upgraded from 9.3.4 to 9.5 as the databases are incompatible without upgrading.I used pg_upgrade as follows:Stop postgresUpgrade the databases:Archive the old databases:Restart postgres:Updated Gems (for rails / active record) :This is actually what you are supposed to do:you should instead look at /usr/local/var/postgres/postmaster.pidand then look at the first line of the file - this is the bad PIDRun for example:then dofor exampleAssuming it\'s still runninghttps://superuser.com/questions/553045/fatal-lock-file-postmaster-pid-already-existsdo not listen to the accepted answer it is bad and will corrupt your data!!!Psql option -h hostname\n--host=hostname: Specifies the host name of the machine on which the server is running.\nIf the value begins with a slash, it is used as the directory for the Unix-domain socket.Run psql with -host OptionNo need to make a soft linkChanging postresql or database.yml config settings, changing $PATH, or creating symlinks were all unnecessary for me. All I needed to do was gem uninstall pg and then bundle (or gem install pg).The issue was that the pg gem had been installed before homebrew postgres, so was picking up the settings from the version of postgres that comes with MacOS. Reinstalling it (and thus rebuilding the native extension) fixed the problem.I ran into this issue after trying to restore/drop/create a db while other processes were accessing them. MacOSX/Homebrew fix was:I got this same error. Turns out postgres just wasn\'t running at all (it is usually always running in the background, but for whatever reason it wasn\'t today). If this is the case, just type postgres in the command line of your project directoryFWIW this happened to me today, but what happened was that I was running Ubuntu updates at the time, which were likely updating Postgres. Once the update completed, I was able to connect without a hitch.For completeness\' sake, I was trying to retrieve records from the database from a Rails console:The most fool proof way around this is to doThis will keep your user permission etc all intact and everything is reset to new. Works all the time !For those who use this command and doesn\'t work or the file is not there and are using Ruby on Railsrm /usr/local/var/postgres/postmaster.pidOr any other command and just keep on failing.I solved this problem uninstalling with Brew.\nI had to uninstall with brew 2 times, because at the first uninstall there will remain another version of postgresql, with the second uninstall the process will be completed.Install postgresql with BrewThen drop, create and migrate the data bases of the project(Don\'t forget to start the postgresql server)If postgres was installed using homebrew, you can fix this by running:The CauseLion comes with a version of postgres already installed and uses those binaries by default. In general you can get around this by using the full path to the homebrew postgres binaries but there may be still issues with other programs.The SolutionViahttp://nextmarvel.net/blog/2011/09/brew-install-postgresql-on-os-x-lion/After a tremendous amount of back and forth, it really came down to the pg gem version I was using.  On mavericks, pg version 0.15.1 would not connect to port 5432 but version 0.17.1 works just fine - very odd.It looks like your psql doesn\'t run. You should run it before connect. You can do that using Postgres.app for Mac OS only. (Download and install this app http://postgresapp.com) Open the app, and you have a PostgreSQL server ready and awaiting new connections. Close the app, and the server shuts down. You also can find this info here http://www.postgresql.org/download/macosx/. Hope this will help you.It is because a previous server a still running, try closing everything down and re-running your application.For me it was an apache upgrade that caused the problem. I could still run psql in console or call db directly from kdevelop. Also it worked to add "host=localhost" to connection string.BUT the real problem was that apache had changed to private tmp.Solution: Update /usr/lib/systemd/system/apache2.service and change PrivateTmp=true to PrivateTmp=false.I am working on OpenSuse OS, but I guess that something similar could happen on Mac.Came across this issue too on MacOS Sierra and when we ran pg_ctl as described above we then had the following error pg_ctl: no database directory specified and environment variable PGDATA unset. So we followed the steps here which solved our issue, namely:mkdir ~/.postgresinitdb ~/.postgrespg_ctl -D ~/.postgres startI used the Bitnami stack and installed as non-root user psql. On using psql I did receive the mentioned error.Turns out, there are 2 versions of psqlYou might want to change the alias of the psql, so that it points to the non-root user.The above worked for me on doing psql -U postgresJust two steps to run the database after the Installation (Before that ensure your logged as postgres user)For an example:Step-2 : Run psql from the Installed path (To check where you installed \'#which postgres\' will use to find out the installed location)