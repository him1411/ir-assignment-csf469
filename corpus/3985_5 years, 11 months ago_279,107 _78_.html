I have a web project (C# Asp.Net, EF 4, MS SQL 2008 and IIS 7) and I need to migrate it to IIS 7 locally (at the moment works fine with CASSINI).Locally in IIS I have my Default Web Site with my deploy. Both my deploy and Default Web Site are on pool ASP.NET v4.0 (look image for settings) the pool target Framework 4 as my web project.\n\nWhen visiting the site, the browser does not show the page and allow the browser to download the page instead.I have other projects running on IIS locally and they work with no problems (but they do not use Entity Framework).Using the Event Logger I see errors as below:Related questionUPDATE:\nYou can read in the resources on this question that permissions must be granted on MS SQL 2008 manually as arift explain in his answer.\nUsing IIS 7.5 and MS SQL 2008 R2, setting manually permission should not be necessary.Looks like it\'s failing trying to open a connection to SQL Server.You need to add a login to SQL Server for IIS APPPOOL\\ASP.NET v4.0 and grant permissions to the database.In SSMS, under the server, expand Security, then right click Logins and select "New Login...".In the New Login dialog, enter the app pool as the login name and click "OK".You can then right click the login for the app pool, select Properties and select "User Mapping".  Check the appropriate database, and the appropriate roles.  I think you could just select db_datareader and db_datawriter, but I think you would still need to grant permissions to execute stored procedures if you do that through EF.  You can check the details for the roles here.You can change the ApplicationPoolIdentity from IIS7 -> Application Pools -> Advanced Settings. \nUnder ApplicationPoolIdentity you will find local system. This will make your application run under NT AUTHORITY\\SYSTEM, which is an existing login for the database by default.Edit: Before applying this suggestion you should note and understand the security implications.ensure you have...in your connection StringI solved this problem using sql as following image.Right click on db-> properties -> permission -> View Server permission -> and then select IIS APPPOOL\\ASP.NET v4.0 and grant permission.If in the connection string you have specified:but in the connection string there is:SQL Server will use Windows Authentication, so your connection values will be ignored and overridden (IIS will use the Windows account specified in Identity user profile).\nmore info hereThe same applies if in the connection string there is:orbecause Windows Authentication will be used to connect to the database server.\nmore info hereI hate the ApplicationPoolIdentity.  I always set a Windows User Account as the account on AppPools.As adrift says, it does sound like a database security issue.  So create an NT user account, assign it to the ASP.NET v4.0 AppPool and then grant it permission on the website folder and to the relevant table(s) in SQL.Don\'t use Integrated Security.\nUse User Id=yourUser; pwd=yourPwd;This solves the problem.First thing you need to clear if you are using windows authentication and you are not mentioning any username password in your connection string then:What happens when you run your code through localhost: when you run your wcf test client from localhost, it will be able to communicate to database as local debug mode application is calling database by your account\'s service. So it has access to database because devenv.exe is running under your user account.But when you deploy your web service in IIS. Now understand this service runs under IIS not under your account. So you need to assign access rights to IIS service to access the sql server for windows authentication. Here your web service would not be able to communicate to the SQL server because of access rights issue and Login Failed for user_______ (here your user will come)So if you are using windows authentication to connect your database, you just have to change the IIS Application pool settings. You need to change IIS Application pool\'s identity to local System.Below are the Steps for windows authentication WCF: \xe2\x80\xa2Open IIS (windows+R (run) then type inetmgr, then click ok) \xe2\x80\xa2double click your PC name under Connections \xe2\x80\xa2Click Application Pools \xe2\x80\xa2Select your app pool (DefaultAppPool) \xe2\x80\xa2Then under actions on the right click Advanced Settings: \xe2\x80\xa2Go to Process Model section and \xe2\x80\xa2click on Identity. \xe2\x80\xa2Now select LocalSystem.Now open your sql server management studio: open run-> then type ssms then press ok in ssms, login using your windows authentication account. open security tab expand logins tab then you will be able to view your account.Now open properties of your account\ngo to userMapping then select the database you want to connect \nthen check the role membership services you want to use for the selected database \nclick ok.\n(For network services i.e. intranet users you need to configure above settings for NT AUTHORITY\\SYSTEM user too)add Trusted_Connection=True; property in your connection string. Save it & deploy the web service. Restart app pool.you will be able to connect the database now.I had this issue and it was actually caused by something different - I had the \'IIS APPPOOL\\ASP.NET v4.0\' user in my database but it still wasn\'t working.  I had recently upgraded my SQL Server Install and in the process the User had become disconnected from the Login - so there was an \'IIS APPPOOL\\ASP.NET v4.0\' under Database -> Security -> Users BUT no User not under Security -> Logins.Added the Login \'IIS APPPOOL\\ASP.NET v4.0\' to Security -> Logins, SQL Server automatically mapped it to the User in the database (this used to have to be done manually) and problem fixed.Run this scriptI had this message and I use Windows Authentication on the web server.I wanted the currently authenticated web user to be authenticated against the database, rather than using the IIS APPPOOL\\ASP.NET v4 User specified in the App Pool. I found by entering the following in the web.config fixed this for me:https://msdn.microsoft.com/en-us/library/bsz5788z.aspxI see other Answers regarding creating the AppPool username in the SQL DB or just to use SQL Auth. Both would be correct if you didn\'t want to capture or secure individual Windows users inside SQL.TomSetting the identity only makes this work in my pages.Cassini runs your website as your own user identity when you start up the Visual Studio application. IIS runs your website as an App Pool Identity. Unless the App Pool Identity is granted access to the Database, you get errors. IIS introduced App Pool Identity to improve security. You can run websites under the default App Pool Identity, or Create a new App Pool with its own name, or Create a new App Pool with its own name that runs under a User Account (usually Domain Account). In networked situations (that are not in Azure) you can make a new App Pool run under an Active Directory Domain user account; I prefer this over the machine account. Doing so gives granular security and granular access to network resources, including databases. Each website runs on a different App Pool (and each of those runs under its own Domain User account). Continue to use Windows Integrated Security in all Connection Strings. In SQL Server, add the Domain users as logins and grant permissions to databases, tables, SP etc. on a per website basis. E.g. DB1 used by Website1 has a login for User1 because Website1 runs on an App Pool as User1. One challenge with deploying from the Visual Studio built-in DB (e.g. LocalDB) and built-in Web Server to a production environment derives from the fact that the developer\'s user SID and its ACLs are not to be used in a secure production environment.  Microsoft provides tools for deployment. But pity the poor developer who is accustomed to everything just working out of the box in the new easy VS IDE with localDB and localWebServer, because these tools will be hard to use for that developer, especially for such a developer lacking SysAdmin and DBAdmin support or their specialized knowledge. Nonetheless deploying to Azure is easier than the enterprise network situation mentioned above. If you have your connection string added in your web.config, make sure that "Integrated Security=false;" so it would use the id and password specified in the web.config.As pointed out, Do not use Windows Authentication, Use SQL Server AuthenticationAlso if you created connection using "Server Connection" dialog, make sure to check the connections in web.config. It is likely that you created/modified connection and it was stored as trusted connection in web.config. Simply use this authenticationwhich should fix the error.Have you done what @Teddy recommended and you STILL get the same error?Make sure you\'re changing the settings for the app pool that corresponds to your virtual directory and not the parent server. Each virtual directory has its own AppPool and doesn\'t inherit.In DefaultAppPool set NetworkService in the Identity property and in Sql Server add User Network Service and give it the appropiate permissions to your database, that\'s work very well for me, I\'ve tested locally but I think this is the best configuration for connecting from any other computer in the network. when you set LocalSystem in the Identity in IIS that\'s work well and it is not necessary to create any other user in Sql Server but I think that will not work in a network environment.I ran into the same problem testing ASP.NET Web API Developed Web.Host in Visual Studio 2013 Express\nDatabase created in SQL Server 2012 Express\nExecuted test using built in IIS Express (working)\nModified to use IIS Local (from properties page - web option)\nRan test with Fiddler \nReceived error - unable to open database for provider....\n citing \'APPPOOL\\DefaultAppPool\' Solution that worked.In IISClick on application pool \'DefaultAppPool\'\nSet Identify = \'ApplicationPoolIdentity\'\nSet .NET framework = v4.0 (even though my app was 4.5)In SQL Server Management StudioRight click on Security folder (under the SQL Server engine so applies to all tables)\nRight click on User and add \'IIS APPPOOL\\DefaultAppPool\'\nIn securables on the \'Grant\' column check the options you want to give. \nRegarding the above if you are a DBA you probably know and want to control\nwhat those options are. If you are like me a developer just wanted to test\nyour WEB API service which happens to also access SQL Server through EF 6\nin MVC style then just check off everything. :) Yes I know but it worked.In case you add a new login, make sure that under server properties ( rightclick -> properties)/security, authentication mode is set to both sqlserver and windows not only windows.Add "Everyone" under security. If you added the Server and the users logging in to the database, then this is something you are missing. \nHope this helps.For the record, if you encounter this error after switching from LocalDB to SQLEXPRESS, make sure the database already esists in SQLEXPRESS. You can verify this in  Management Studio.I had the same problem when using Entity Framework after switching to SQLEXPRESS from LocalDB. I had to run Update-Database command. I was able to successfully connect after that.Another way of granting permission to the database for the user IIS APPPOOL\\ASP.NET v4.0 is as follows. \nI have faced the similar issue while host the appication in IISSolutionI change the Pool Identity and its work me