I have a Ruby code file open in vi, there are lines commented out with #:Say I want to uncomment all the lines in the first def ... end section. What\'s an efficient way to do that in Vim?In general, I\'m looking for an easy and fluid way to comment and uncomment lines. Here I\'m dealing with Ruby code, but it could be JavaScript (//) or Haml (-#).I use the NERD Commenter script. It lets you easily comment, uncomment or toggle comments in your code.For those tasks I use most of the time block selection.Put your cursor on the first # character, press CtrlV (or CtrlQ for gVim), and go down until the last commented line and press x, that will delete all the # characters vertically.For commenting a block of text is almost the same: For the stripped-down version of vim shipped with debian/ubuntu by default, type : s/^/# in the third step instead.Give it a second to work.\n\nIf you want to select multiple characters, use one or combine these methods:\n\npress d or x to delete characters, repeatedly if necessarypress EscGive it a second to work. Sometimes I\'m shelled into a remote box where my plugins and .vimrc cannot help me, or sometimes NerdCommenter gets it wrong (eg JavaScript embedded inside html).  In these cases a low-tech alternative is the built-in norm command, which just runs any arbitrary vim commands at each line in your specified range.  For example:Commenting with #:This inserts "#" at the start of each line.  Note that when you type : the range will be filled in, so it will really look like :\'<,\'>norm i#Uncommenting #:This deletes the first character of each line.  If I had used a 2-char comment such as // then I\'d simply do :norm xx to delete both chars.  If the comments are indented as in the OP\'s question, then you can anchor your deletion like this: which means "go to the first non-space character, then delete one character". Note: Since norm is literally just executing regular vim commands, you\'re not limited just to comments, you could do some complex editing to each line.  If you need the escape character as part of your command sequence, type ctrl-v then hit the escape key.Note 2: You could of course also add a mapping if you find yourself using norm a lot.  Eg putting the following line in ~/.vimrc lets you type ctrl-n instead of :norm after making your visual selectionNote 3: Bare-bones vim sometimes doesn\'t have the norm command compiled into it, so be sure to use the beefed up version, ie typically /usr/bin/vim, not /bin/vi(Thanks to @Manbroski and @rakslice for improvements incorporated into this answer)I have the following in my .vimrc:Now you can type ,cc to comment a line and ,cu to uncomment a line (works both in normal and visual mode).(I stole it from some website many years ago so I can\'t completely explain how it works anymore :). There is a comment where it is explained.)Here is how I do it: Go to first character on the first line you want to comment out.Hit Ctrl+q in GVIM or Ctrl+v in VIM, then go down to select first character on the lines to comment out. Then press c, and add the comment character.Uncommenting works the same way, just type a space instead of the comment character.Specify which lines to comment in vim:Reveal the line numbers:then or this:Use Control-V to select rectangles of text: go to the first # character, type Ctrl+V, move right once, and then down, up to the end of the comments.  Now type x: you\'re deleting all the # characters followed by one space.I\'ve come up with a simple addition to my .vimrc file which works pretty well and can be extended easily. You simply add a new filetype to the comment_map and its comment leader.I added a mapping to normal and visual modes, but you can remap to anything you like. I prefer only to have a \'toggle\' style function. One bears having multiple mappings etc. Note:I don\'t use any callbacks or hooks into the file types/loading, because I find they slow down Vim\'s startup more than the .vimrc static function/map does but that\'s just my preference. I\'ve also tried to keep it simple and performant. If you do use autocommands you need to be sure to put them in an autocommand group or else the callbacks get added to the filetype multiple times per-file loaded and cause a lot of performance degradation. Here is a section of my .vimrc:In normal and in visual mode, this lets me press ,ic to insert comments and,rc to remove comments.First press --> clt+vPress arrow key up or down as neededThen press --> shift+iThen insert comment using --> shift+#EscIf all you need is toggle comments I\'d rather go with commentary.vim by tpope.Pathogen:vim-plug:Vundle: Add this to your .vimrc file: noremap <leader>/ :Commentary<cr>You can now toggle comments by pressing Leader+/, just like Sublime and Atom.clt+vdrop down using arrow keyshif+ishift+#Escthen wait \n and  doneI like to use the tcomment plugin:\nhttp://www.vim.org/scripts/script.php?script_id=1173I have mapped gc and gcc to comment a line or a highlighted block of code. It detects the file type and works really well. I use EnhancedCommentify. It comments everything I needed (programming languages, scripts, config files). I use it with visual-mode bindings. Simply select text you want to comment and press co/cc/cd.If you already know the line numbers, then n,ms/# // would work.I mark the first and last lines (ma and mb), and then do :\'a,\'bs/^# //With 30 answers ahead of me, I\'ll try to give an even easier solution: Insert a # at the beginning of the line. Then go down a line and press dot (.). To repeat, do j,.,j,., etc...To uncomment, remove a # (you can hit x over the #), and do the reverse using k,.,etc... How to uncomment the following three lines in vi:Place the cursor over the upper left # symbol and press Ctrl+V.  This puts you in visual block mode.  Press the down arrow or j three times to select all three lines.  Then press d.  All the comments disappear.  To undo, press u. How to comment the following three lines in vi:Place the cursor over the upper left character, press Ctrl+V.  This puts you in visual block mode.  Press the down arrow or j three times to select all three lines.  Then press:I//EscThat\'s a capital I, //, and Escape.When you press Esc, all the selected lines will get the comment symbol you specified.I use Tim Pope\'s vim-commentary plugin. I use comments.vim from Jasmeet Singh Anand (found on vim.org),It works with c, c++, java, php[2345], proc, css, html, htm, xml, xhtml, vim, vimrc, sql, sh, ksh, csh, perl, tex, fortran, ml, caml, ocaml, vhdl, haskel and normal filesIt comments and un-comments lines in different source files in both normal and visual  mode Usage: I combined Phil and jqno\'s answer and made untoggle comments with spaces:This simple snippet is from my .vimrc:It\'s for //-Comments, but you can adapt it easily for other characters. You could use autocmd to set a leader as jqno suggested.This is a very simple and efficient way working with ranges and visual mode naturally.The quickest and the most intuitive method of them all is to remap ) for walk-down-commenting of lines, and then ( for walk-up-uncommenting. Try it and you won\'t go back. In Ruby or Bash, with 2-space indents: In C/C++ or PHP, with 4-space indents: Downsides are that you lose ( and ) for sentence-movement (but das can fill in there), and you\'ll occasionally fall back on select-and-replace or Ctrl-V for handling long sections. But that\'s pretty rare. And for C-style, the long comments are best handled with:... which combines well with using V[move]gq to redo the word-wrapping. I use vim-multiple-cursors for this.Starting with the ideas in answers here, I started my own comment function.\nIt toggles comments on and off. It can handle things like //print(\'blue\'); //this thing is blue and just toggles the first comment. Furthermore it adds comments and a single space just where the first non whitespace is and not at the very start of the line.\nAditionally it doesn\'t unnecessarily copy the whitespaces, but uses zooms (:h \\zs for help) to avoid this extra work, when commenting and indented line.\nHope it helps some minimalists out there. Suggestions are welcome.You can use vim-commentary by tpope (https://github.com/tpope/vim-commentary) you can use it as following:Enter visual mode by pressingThen press Now all you have to do with the selection is enter keys:This will comment out all the selection, to uncomment repead keys:I like /* ... */ (C ansi comments), so here it is my trick for you. You can adapt it to use in different cases, of course.Comment with /* ... */ Select the text (go to the begin, start visual block, jump with }):Type the command to be applied in the selectionCommand will look like: :\'<,\'>norm i /* ^[$a */See (i*) for details.Uncomment the /* ... */ Select the text (as before, or other way you like):Type the command to be applied in the selectionCommand will look like: :\'<,\'>norm :s-\\s*/\\*\\s*-^M$bbld$See (ii*) for details.Result Effect is comments line by line:Becomes (and vice-versa):Its better to save it as some map or @reg in your .vimrc, because it\'s a lot to type. If you prefer a single /* and */ to the whole block, use:Comment with a single /* */ the whole blockSave it in a register by recording with, say, qc, then, at the beginning of a paragraph to comment:and don\'t forget q again, to finish the record.See (iii*) for details.Uncomment a single /* */ from a blockSave it in register, say, @u. Put your cursor anywhere inside the block, and:Save the register by finishing q command.See (iv*) for details.Result Effect is a single comment for multiple lines:Becomes (and vice-versa):Explanations(i*) It works by using norm which applies the same command repeatedly in every selected line. The command simply insert a /*, finds the end of that line and finishes by inserting a */(ii*) It also uses norm to repeat the search/replace on every line. Search for spaces /* spaces and replace by nothing. After that, finds the end of the line, back two words, right a letter, delete to the end.(iii*) Selects the paragraph by v}, delete it, insert a comment open and close, move to its middle and paste the deleted block.(iv*) Anywhere in the middle, finds backwards a /*, deletes it; finds forward a */, deletes it.Very good question, but not so many good answers imho. First, I would say, using block insert mode is not an easy solution here, just too many keystrokes, so obviously it must work on selected lines to improve performance of code editing. Another point which nobody mentions : where the comment sign should be put - in the very beginning of the line or before actual text? It is a matter of taste probably, but my opinion, it should be put before the text to keep the code readable: when the comment sign is put in the very line beginning it breaks the visual consistence of indented code, so it looks like a bulleted list. With that in mind, I\'ve ended up with following solution (I make example for # comment). In my vimrc:Key 1 inserts # before the text (after white space) in every selected line. It checks if there is already #, not to insert # twice. And also ignores empty lines.\nKey 2 deletes one #. It also keeps the comments on the right side of line safe.Update: here is an example, how to make file type dependent toggle comment command. To learn more about these thing read: http://learnvimscriptthehardway.stevelosh.com/chapters/14.html Just to make it work, put the following lines in your .vimrc file.   Yes, there are 33 (mostly repetitive) answers already to this question.Here is another approach to how to comment lines out in Vim: motions.   The basic idea is to comment or uncomment lines out using the same method as yanking a paragraph by typing yip or deleting 2 lines by typing dj.This approach will let you do things like:ccj to comment the next 2 lines out, and cuk to uncomment them;cci{ to comment a block out, and cui{ to uncomment it;ccip to comment a whole paragraph out, and cuip to uncomment it.ccG to comment everything out down to the last line, and cugg to uncomment everything up to the first line.All you need are 2 functions that operate over motions, and 2 mappings for each function. First, the mappings:(See the manual about the g@ operator and the operatorfunc variable.)And now the functions:Modify the regular expressions above to suit your taste as to where the # should be: