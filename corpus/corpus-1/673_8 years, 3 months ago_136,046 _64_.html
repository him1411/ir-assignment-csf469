What would be a good way to attempt to load the hosted jQuery at Google (or other Google hosted libs), but load my copy of jQuery if the Google attempt fails?I\'m not saying Google is flaky. There are cases where the Google copy is blocked (apparently in Iran, for instance).Would I set up a timer and check for the jQuery object?What would be the danger of both copies coming through?Not really looking for answers like "just use the Google one" or "just use your own." I understand those arguments. I also understand that the user is likely to have the Google version cached. I\'m thinking about fallbacks for the cloud in general.Edit: This part added...Since Google suggests using google.load to load the ajax libraries, and it performs a callback when done, I\'m wondering if that\'s the key to serializing this problem.I know it sounds a bit crazy. I\'m just trying to figure out if it can be done in a reliable way or not.Update: jQuery now hosted on Microsoft\'s CDN.http://www.asp.net/ajax/cdn/You can achieve it like this:This should be in your page\'s <head> and any jQuery ready event handlers should be in the <body> to avoid errors (although it\'s not fool-proof!).One more reason to not use Google-hosted jQuery is that in some countries, Google\'s domain name is banned.The easiest and cleanest way to do this by far:This seems to work for me:The way it works is to use the google object that calling http://www.google.com/jsapi loads onto the window object. If that object is not present, we are assuming that access to Google is failing. If that is the case, we load a local copy using document.write. (I\'m using my own server in this case, please use your own for testing this).I also test for the presence of window.google.load - I could also do a typeof check to see that things are objects or functions as appropriate. But I think this does the trick.Here\'s just the loading logic, since code highlighting seems to fail since I posted the whole HTML page I was testing:Though I must say, I\'m not sure that if this is a concern for your site visitors you should be fiddling with the Google AJAX Libraries API at all.Fun fact: I tried initially to use a try..catch block for this in various versions but could not find a combination that was as clean as this. I\'d be interested to see other implementations of this idea, purely as an exercise.if you have modernizr.js embedded on your site, you can use the built-in yepnope.js to load your scripts asynchronously - among others jquery (with fallback).this loads jquery from the google-cdn. afterwards it\'s checked, if jquery was loaded successfully. if not ("nope"), the local version is loaded. also your personal scripts are loaded - the "both" indicates, that the load-process is iniated independently from the result of the test.when all load-processes are complete, a function is executed, in the case \'MyApp.init\'.i personally prefer this way of asynchronous script loading. and as i rely on the feature-tests provided by modernizr when building a site, i have it embedded on the site anyway. so there\'s actually no overhead.There are some great solutions here, but I\'ll like to take it one step further regarding the local file.In a scenario when Google does fail, it should load a local source but maybe a physical file on the server isn\'t necessarily the best option. I bring this up because I\'m currently implementing the same solution, only I want to fall back to a local file that gets generated by a data source.My reasons for this is that I want to have some piece of mind when it comes to keeping track of what I load from Google vs. what I have on the local server. If I want to change versions, I\'ll want to keep my local copy synced with what I\'m trying to load from Google. In an environment where there are many developers, I think the best approach would be to automate this process so that all one would have to do is change a version number in a configuration file.Here\'s my proposed solution that should work in theory:In theory, if my code is written properly, all I would need to do is change the version number in my app config then viola! You have a fallback solution which is automated, and you don\'t have to maintain physical files on your server.What does everyone think? Maybe this is overkill, but it could be an elegant method of maintaining your ajax libraries.AcornAfter you attempt to include Google\'s copy from the CDN.In HTML5, you don\'t need to set the type attribute.You can also use...You might want to use your local file as a last resort.Seems as of now jQuery\'s own CDN does not support https. If it did you then might want to load from there first.So here\'s the sequence: \nGoogle CDN =>\nMicrosoft CDN =>\nYour local copy.Conditionally load latest/legacy jQuery version and fallback:Because of the google\'s banning problem I prefer to use microsoft\'s cdn \nhttp://www.asp.net/ajaxlibrary/cdn.ashxHow to check a not-defined variable in JavaScriptHow do I include a JavaScript file in another JavaScript file?Here is a great explaination on this!Also implements loading delays and timeouts!http://happyworm.com/blog/2010/01/28/a-simple-and-robust-cdn-failover-for-jquery-14-in-one-line/For those people using ASP.NET MVC 5, add this code in your BundleConfig.cs to enable the CDN for jquery:UPDATE:\nThis answer turned out to be wrong. Please see the comments for the real explanation.Most of you question has been answered, but as for the final part:What would be the danger of both copies coming through?None really.  You\'d waste bandwidth, might add some milliseconds downloading a second useless copy, but there\'s not actual harm if they both come through.  You should, of course, avoid this using the techniques mentioned above.orwill not works if cdn version not loaded, because browser will run through this condition and during it still downloading the rest of javascripts which needs jquery and it returns error. Solution was to load scripts through that condition.Google Hosted jQueryBackup/Fallback Plan!Reference: http://websitespeedoptimizations.com/ContentDeliveryNetworkPost.aspxI consider that should escape the last < to \\x3C in string. When the browser sees , it considers this to be the end of the script block (since the HTML parser has no idea about JavaScript, it can\'t distinguish between something that just appears in a string, and something that\'s actually meant to end the script element). So  appearing literally in JavaScript that\'s inside an HTML page will (in the best case) cause errors, and (in the worst case) be a huge security hole.Using Razor syntax in ASP.NET, this code provides fallback support and works with a virtual root:Or make a helper (helper overview):and use it like this:I made a Gist that should dynamically load jQuery if it isn\'t already loaded, and if the source fails, it proceeds onto fallbacks (stitched together from many answers): https://gist.github.com/tigerhawkvok/9673154 Please note I plan to keep the Gist updated but not this answer, for what it\'s worth!Although writing document.write("<script></script>") seems easier for jQuery backoff, Chrome gives validation error on that case. So I prefer breaking "script" word. So it becomes safer like above.For long term issues, it would be better to log JQuery fallbacks. In the code above, if first CDN is not available JQuery is loaded from another CDN. But you could want to know that erroneous CDN and remove it permanently. (this case is very exceptional case) Also it is better to log fallback issues. So you can send erroneous cases with AJAX. Because of JQuery isn\'t defined, you should use vanilla javascript for AJAX request.The inability to load the resource from an external data store beyond your control is difficult.  Looking for missing functions is totally fallacious as a means to avoid suffering a timeout, as described herein:\nhttp://www.tech-101.com/support/topic/4499-issues-using-a-cdn/ Yet another fallback that replaces ajax.googleapis.com with cdnjs.cloudflare.com: