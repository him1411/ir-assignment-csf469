Im gettingwhen I try to make postgres work with Rails. Here\'s my pg_hba.conf, my database.yml, and a dump of the full trace.I changed authentication to md5 in pg_hba and tried different things, but none seem to work. I also tried creating a new user and database as per Rails 3.2, FATAL: Peer authentication failed for user (PG::Error)But they don\'t show up on pgadmin or even when I run sudo -u postgres psql -lAny idea where I\'m going wrong?The problem is still your pg_hba.conf file (/etc/postgresql/9.1/main/pg_hba.conf). This line:Should beAfter altering this file, don\'t forget to restart your PostgreSQL server. If you\'re on Linux, that would be sudo service postgresql restart.These are brief descriptions of both options according to the official PostgreSQL docs on authentication methods.The peer authentication method works by obtaining the client\'s\n  operating system user name from the kernel and using it as the allowed\n  database user name (with optional user name mapping). This method is\n  only supported on local connections.The password-based authentication methods are md5 and password. These\n  methods operate similarly except for the way that the password is sent\n  across the connection, namely MD5-hashed and clear-text respectively.If you are at all concerned about password "sniffing" attacks then md5\n  is preferred. Plain password should always be avoided if possible.\n  However, md5 cannot be used with the db_user_namespace feature. If the\n  connection is protected by SSL encryption then password can be used\n  safely (though SSL certificate authentication might be a better choice\n  if one is depending on using SSL).After installing Postgresql I did the below steps.topsql -U postgrestoAfter restarting the postgresql server, you can access it with your own passwordAuthentication methods details:trust - anyone who can connect to the server is authorized to access the databasepeer - use client\'s operating system user name as database user name to access it.md5 - password-base authenticationfor further reference check hereIf you connect over localhost (127.0.0.1) you shouldn\'t experience that particular issue. I wouldn\'t muck much with the pg_hba.conf but instead I would adjust your connection string:where someuser is your user you\'re connecting as and database is the database your user has permission to connect to. Here is what I do on Debian to setup postgres:Enjoy!In my case:So this will be changed to:Database administrative login by Unix domain socket\n    local   all             postgres                                peerThis:Database administrative login by Unix domain socket\n    local   all             postgres                                md5Then restart pg server:$> sudo service postgresql restartBelow is list of METHODS used to connect with postgres:Note: If you have not create you postgres user yet. Create that and now you can access postgres server using that user credentials.I had the same problem.The solution from depa is absolutely correct.Just make sure that u have a user configured to use PostgreSQL.Check the file:The permission of this file should be given to the user you have registered your psql with.Further. If you are good till now..Update as per @depa\'s instructions.i.e.and then make changes.If you have problem, you need to locate your pg_hba.conffind / -name \'pg_hba.conf\' 2>/dev/nullAnd change configuration like image:Postgresql 9.3Postgresql 9.4After that you should to restart service postgresqlExample for postgresql 9.3service postgresql-9.3 restartIf you have any problems, you need to set password again:ALTER USER db_user with password \'db_password\';I was moving data directory on a cloned server and having troubles to login as postgres. Resetting postgres password like this worked for me.root# su postgres\npostgres$ psql -U postgres\npsql (9.3.6) \nType "help" for help. \npostgres=#\\password \nEnter new password: \nEnter it again: \npostgres=#The edits above worked for me, after I figured out that I needed to restart the postgres server after making them. \nFor ubuntu:Use "host=localhost" in connection.PGconn *conn = PQconnectdb("host=localhost user=postgres dbname=postgres password=123");If you want to keep the default config but want md5 authentication with socket connection for one specific user/db connection, add a "local" line BEFORE the "local all/all" line:the below command works for me:You need just set METHOD to trust.And reload postgres server. Changes in pg_hba.conf dont require RESTART postgres server. just RELOAD.Changing METHOD peer to trust in pg_hba.conf (/etc/postgresql/9.1/main/pg_hba.conf | line 85) solves the issue. Adding md5 asks for a password, hence if there is a requirement to avoid using passwords, use trust instead of md5.