The following code gives different output when running the release inside Visual Studio, and running the release outside Visual Studio. I\'m using Visual Studio 2008 and targeting .NET 3.5. I\'ve also tried .NET 3.5 SP1.When running outside Visual Studio, the JIT should kick in. Either (a) there\'s something subtle going on with C# that I\'m missing or (b) the JIT is actually in error. I\'m doubtful that the JIT can go wrong, but I\'m running out of other possiblities...Output when running inside Visual Studio:Output when running release outside of Visual Studio:What is the reason?It is a JIT optimizer bug.  It is unrolling the inner loop but not updating the oVec.y value properly:The bug disappears when you let oVec.y increment to 4, that\'s too many calls to unroll.One workaround is this:UPDATE: re-checked in August 2012, this bug was fixed in the version 4.0.30319 jitter.  But is still present in the v2.0.50727 jitter.  It seems unlikely they\'ll fix this in the old version after this long.I believe this is in a genuine JIT compilation bug. I would report it to Microsoft and see what they say. Interestingly, I found that the x64 JIT does not have the same problem.Here is my reading of the x86 JIT.This looks like an optimization gone bad to me... I copied your code into a new Console App.So it is the x86 JIT incorrectly generating the code.  Have deleted my original text about reordering of loops etc.  A few other answers on here have confirmed that the JIT is unwinding the loop incorrectly when on x86.To fix the problem you can change the declaration of IntVec to a class and it works in all flavours.Think this needs to go on MS Connect....-1 to Microsoft!