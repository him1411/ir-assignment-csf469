I accidentally committed an unwanted file (filename.orig while resolving a merge) to my repository several commits ago, without me noticing it until now. I want to completely delete the file from the repository history. Is it possible to rewrite the change history such that filename.orig was never added to the repository in the first place?Please don\'t use this recipe if your situation is not the one described in the question. This recipe is for fixing a bad merge, and replaying your good commits onto a fixed merge.Although filter-branch will do what you want, it is quite a complex command and I would probably choose to do this with git rebase. It\'s probably a personal preference. filter-branch can do it in a single, slightly more complex command, whereas the rebase solution is performing the equivalent logical operations one step at a time.Try the following recipe:(Note that you don\'t actually need a temporary branch, you can do this with a \'detached HEAD\', but you need to take a note of the commit id generated by the git commit --amend step to supply to the git rebase command rather than using the temporary branch name.)The original poster states:I accidentally committed an unwanted file...to my repository several commits\n   ago...I want to completely delete the file from the repository history. Is it\n   possible to rewrite the change history such that filename.orig was never\n   added to the repository in the first place?There are many different ways to remove the history of a file completely from\ngit:In the case of the original poster, amending the commit isn\'t really an option\nby itself, since he made several additional commits afterwards, but for the sake\nof completeness, I will also explain how to do it, for anyone else who justs\nwants to amend their previous commit.Note that all of these solutions involve altering/re-writing history/commits\nin one way another, so anyone with old copies of the commits will have to do\nextra work to re-sync their history with the new history.If you accidentally made a change (such as adding a file) in your previous\ncommit, and you don\'t want the history of that change to exist anymore, then\nyou can simply amend the previous commit to remove the file from it:Like solution #1, if you just want to get rid of your previous commit, then you\nalso have the option of simply doing a hard reset to its parent:That command will hard-reset your branch to the previous 1st parent\ncommit.However, if, like the original poster, you\'ve made several commits after\nthe commit you want to undo the change to, you can still use hard resets to\nmodify it, but doing so also involves using a rebase. Here are the steps that\nyou can use to amend a commit further back in history:This will work if you just want to remove a commit from history entirely:This solution will allow you to accomplish the same things as solutions #2 and\n#3, i.e. modify or remove commits further back in history than your immediately\nprevious commit, so which solution you choose to use is sort of up to you.\nInteractive rebases are not well-suited to rebasing hundreds of commits, for\nperformance reasons, so I would use non-interactive rebases or the filter branch\nsolution (see below) in those sort of situations.To begin the interactive rebase, use the following:This will cause git to rewind the commit history back to the parent of the\ncommit that you want to modify or remove. It will then present you a list of the\nrewound commits in reverse order in whatever editor git is set to use (this is\nVim by default):The commit that you want to modify or remove will be at the top of this list.\nTo remove it, simply delete its line in the list. Otherwise, replace "pick" with\n"edit" on the 1st line, like so:Next, enter git rebase --continue. If you chose to remove the commit entirely,\nthen that it all you need to do (other than verification, see final step for\nthis solution). If, on the other hand, you wanted to modify the commit, then git\nwill reapply the commit and then pause the rebase.At this point, you can remove the file and amend the commit, then continue the\nrebase:That\'s it. As a final step, whether you modified the commit or removed it\ncompletely, it\'s always a good idea to verify that no other unexpected changes\nwere made to your branch by diffing it with its state before the rebase:Finally, this solution is best if you want to completely wipe out all traces of\na file\'s existence from history, and none of the other solutions are quite up to\nthe task.That will remove <file> from all commits, starting from the root commit. If\ninstead you just want to rewrite the commit range HEAD~5..HEAD, then you can\npass that as an additional argument to filter-branch, as pointed out in\nthis answer:Again, after the filter-branch is complete, it\'s usually a good idea to verify\nthat there are no other unexpected changes by diffing your branch with its\nprevious state before the filtering operation:I\'ve heard that the BFG Repo Cleaner tool runs faster than git filter-branch, so you might want to check that out as an option too. It\'s even mentioned officially in the filter-branch documentation as a viable alternative:git-filter-branch allows you to make complex shell-scripted rewrites\n  of your Git history, but you probably don\xe2\x80\x99t need this flexibility if\n  you\xe2\x80\x99re simply removing unwanted data like large files or passwords.\n  For those operations you may want to consider The BFG\n  Repo-Cleaner, a JVM-based\n  alternative to git-filter-branch, typically at least 10-50x faster for\n  those use-cases, and with quite different characteristics:Any particular version of a file is cleaned exactly once. The BFG, unlike git-filter-branch, does not give you the opportunity to handle\n  a file differently based on where or when it was committed within your\n  history. This constraint gives the core performance benefit of The\n  BFG, and is well-suited to the task of cleansing bad data - you don\xe2\x80\x99t\n  care where the bad data is, you just want it gone.By default The BFG takes full advantage of multi-core machines, cleansing commit file-trees in parallel. git-filter-branch cleans\n  commits sequentially (ie in a single-threaded manner), though it is\n  possible to write filters that include their own parallellism, in the\n  scripts executed against each commit.The command options are much\n  more restrictive than git-filter branch, and dedicated just to the\n  tasks of removing unwanted data- e.g: --strip-blobs-bigger-than 1M.If you haven\'t committed anything since, just git rm the file and git commit --amend.If you havewill go through each change from merge-point to HEAD, delete filename.orig and rewrite the change.  Using --ignore-unmatch means the command won\'t fail if for some reason filename.orig is missing from a change.  That\'s the recommended way from the Examples section in the git-filter-branch man page.Note for Windows users: The file path must use forward slashesThis is the best way:\nhttp://github.com/guides/completely-remove-a-file-from-all-revisions Just be sure to backup the copies of the files first.EDITThe edit by Neon got unfortunately rejected during review.\nSee Neons post below, it might contain useful information!E.g. to remove all *.gz files accidentally committed into git repository:That still didn\'t work for me? (I am currently at git version 1.7.6.1)Not sure why, since I only had ONE master branch. Anyways, I finally got my git repo truely cleaned up by pushing into a new empty and bare git repository, e.g.(yes!)Then I clone that to a new directory and moved over it\'s .git folder into this one. e.g.(yeah! finally cleaned up!)After verifying that all is well, then you can delete the ../large_dot_git and ../tmpdir directories (maybe in a couple weeks or month from now, just in case...)Rewriting Git history demands changing all the affected commit ids, and so everyone who\'s working on the project will need to delete their old copies of the repo, and do a fresh clone after you\'ve cleaned the history. The more people it inconveniences, the more you need a good reason to do it - your superfluous file isn\'t really causing a problem, but if only you are working on the project, you might as well clean up the Git history if you want to!To make it as easy as possible, I\'d recommend using the BFG Repo-Cleaner, a simpler, faster alternative to git-filter-branch specifically designed for removing files from Git history. One way in which it makes your life easier here is that it actually handles all refs by default (all tags, branches, etc) but it\'s also 10 - 50x faster.You should carefully follow the steps here: http://rtyley.github.com/bfg-repo-cleaner/#usage - but the core bit is just this: download the BFG jar (requires Java 6 or above) and run this command:Your entire repository history will be scanned, and any file named filename.orig (that\'s not in your latest commit) will be removed. This is considerably easier than using git-filter-branch to do the same thing!Full disclosure: I\'m the author of the BFG Repo-Cleaner.The simplest way I found was suggested by leontalbot (as a comment), which is a post published by Anoopjohn. I think its worth its own space as an answer:(I converted it to a bash script)All credits goes to Annopjohn, and to leontalbot for pointing it out.NOTEBe aware that the script doesn\'t include validations, so be sure you don\'t make mistakes and that you have a backup in case something goes wrong. It worked for me, but it may not work in your situation. USE IT WITH CAUTION (follow the link if you want to know what is going on).Just to add that to Charles Bailey\'s solution, I just used a git rebase -i to remove unwanted files from an earlier commit and it worked like a charm. \nThe steps:This is what git filter-branch was designed for.You can also use:git reset HEAD file/pathDefinitely, git filter-branch is the way to go.Sadly, this will not suffice to completely remove filename.orig from your repo, as it can be still be referenced by tags, reflog entries, remotes and so on.I recommend removing all these references as well, and then calling the garbage collector. You can use the git forget-blob script from this website to do all this in one step.git forget-blob filename.orig