The question is simple. I have a foreach loop in my code:In this loop, I want to react differently when we are in first or last iteration.How to do this?You could use a counter:If your array has unique array values, then determining the first and last element is trivial:This works if last and first elements are appearing just once in an array, otherwise you get false positives. Therefore, you have to compare the keys (they are unique for sure).Update: Some people are concerned about performance and/or modifying the array pointer inside a foreach loop. For those, you can cache the key value before the loop.To find the last item, I find this piece of code works every time:A more simplified version of the above and presuming you\'re not using custom indexes...You could remove the first and last elements off the array and process them separately.\nLike this:Removing all the formatting to CSS instead of inline tags would improve your code and speed up load time.You could also avoid mixing HTML with php logic whenever possible.\nYour page could be made a lot more readable and maintainable by separating things like this:An attempt to find the first would be:Simply this works!1: Why not use a simple for statement? Assuming you\'re using a real array and not an Iterator you could easily check whether the counter variable is 0 or one less than the whole number of elements. In my opinion this is the most clean and understandable solution...2: You should consider using Nested Sets to store your tree structure. Additionally you can improve the whole thing by using recursive functions.Best answer:  For SQL query generating scripts, or anything that does a different action for the first or last elements, it is much faster (almost twice as fast) to avoid using unneccessary variable checks.The current accepted solution uses a loop and a check within the loop that will be made every_single_iteration, the correct (fast) way to do this is the following :A little homemade benchmark showed the following:test1: 100000 runs of model morgtime: 1869.3430423737 millisecondstest2: 100000 runs of model if lasttime: 3235.6359958649 millisecondsAnd it\'s thus quite clear that the check costs a lot, and of course it gets even worse the more variable checks you add ;)Using a Boolean variable is still the most reliable, even if you want to check the first appearance of a $value (I found it more useful in my situation and in many situations), such like this:Then how about !next( $array ) to find the last $value which will return true if there\'s no next() value to iterate.And I prefer to use a for loop instead of foreach if I were going to use a counter, like this:With Keys and Values this works as well:The most efficient answer from @morg, unlike foreach, only works for proper arrays, not hash map objects. This answer avoids the overhead of a conditional statement for every iteration of the loop, as in most of these answers (including the accepted answer) by specifically handling the first and last element, and looping over the middle elements.The array_keys function can be used to make the efficient answer work like foreach:I haven\'t done benchmarking on this, but no logic has been added to the loop, which is were the biggest hit to performance happens, so I\'d suspect that the benchmarks provided with the efficient answer are pretty close.If you wanted to functionalize this kind of thing, I\'ve taken a swing at such an iterateList function here. Although, you might want to benchmark the gist code if you\'re super concerned about efficiency. I\'m not sure how much overhead all the function invocation introduces.Not sure if it still necessary. But the following solution should work with iterators and does not require count.I came across this thread when I have the same problem. I only need to get the first element then I re-analyze my code until this came up to my mind.The above codes are great and complete but if you only need just the first element then you may try this code.Try this: