Alan Storm\'s comments in response to my answer regarding the with statement got me thinking. I\'ve seldom found a reason to use this particular language feature, and had never given much thought to how it might cause trouble. Now, I\'m curious as to how I might make effective use of with, while avoiding its pitfalls.Where have you found the with statement useful?Another use occurred to me today, so I searched the web excitedly and found an existing mention of it: Defining Variables inside Block Scope.JavaScript, in spite of its superficial resemblance to C and C++, does not scope variables to the block they are defined in:Declaring a closure in a loop is a common task where this can lead to errors:Because the for loop does not introduce a new scope, the same num - with a value of 2 - will be shared by all three functions. With the introduction of the let statement in ES6, it becomes easy to introduce a new scope when necessary to avoid these problems:Or even:Until ES6 is universally available, this use remains limited to the newest browsers and developers willing to use transpilers. However, we can easily simulate this behavior using with:The loop now works as intended, creating three separate variables with values from 0 to 2. Note that variables declared within the block are not scoped to it, unlike the behavior of blocks in C++ (in C, variables must be declared at the start of a block, so in a way it is similar). This behavior is actually quite similar to a let block syntax introduced in earlier versions of Mozilla browsers, but not widely adopted elsewhere.I have been using the with statement as a simple form of scoped import. Let\'s say you have a markup builder of some sort. Rather than writing:You could instead write:For this use case, I am not doing any assignment, so I don\'t have the ambiguity problem associated with that.As my previous comments indicated, I don\'t think you can use with safely no matter how tempting it might be in any given situation. Since the issue isn\'t directly covered here, I\'ll repeat it.  Consider the following codeWithout carefully investigating those function calls, there\'s no way to tell what the state of your program will be after this code runs.  If user.name was already set, it will now be Bob. If it wasn\'t set, the global name will be initialized or changed to Bob and the user object will remain without a name property. Bugs happen.  If you use with you will eventually do this and increase the chances your program will fail.  Worse, you may encounter working code that sets a global in the with block, either deliberately or through the author not knowing about this quirk of the construct.  It\'s a lot like encountering fall through on a switch, you have no idea if the author intended this and there\'s no way to know if "fixing" the code will introduce a regression.Modern programming languages are chocked full of features. Some features, after years of use, are discovered to be bad, and should be avoided.  Javascript\'s with is one of them.I actually found the with statement to be incredibly useful recently.  This technique never really occurred to me until I started my current project - a command line console written in JavaScript.  I was trying to emulate the Firebug/WebKit console APIs where special commands can be entered into the console but they don\'t override any variables in the global scope.  I thought of this when trying to overcome a problem I mentioned in the comments to Shog9\'s excellent answer.To achieve this effect, I used two with statements to "layer" a scope behind the global scope:The great thing about this technique is that, aside from the performance disadvantages, it doesn\'t suffer the usual fears of the with statement, because we\'re evaluating in the global scope anyway - there\'s no danger of variables outside our pseudo-scope from being modified.  I was inspired to post this answer when, to my surprise, I managed to find the same technique used elsewhere - the Chromium source code!EDIT: Just checked the Firebug source, they chain 4 with statements together for even more layers.  Crazy!Yes, yes and yes.  There is a very legitimate use.  Watch:Basically any other DOM or CSS hooks are fantastic uses of with.  It\'s not like "CloneNode" will be undefined and go back to the global scope unless you went out of your way and decided to make it possible.Crockford\'s speed complaint is that a new context is created by with.  Contexts are generally expensive.  I agree.  But if you just created a div and don\'t have some framework on hand for setting your css and need to set up 15 or so CSS properties by hand, then creating a context will probably be cheaper then variable creation and 15 dereferences:etc...You can define a small helper function to provide the benefits of with without the ambiguity:Hardly seems worth it since you can do the following:I don\'t ever use with, don\'t see a reason to, and don\'t recommend it.The problem with with is that it prevents numerous lexical optimizations an ECMAScript implementation can perform. Given the rise of fast JIT-based engines, this issue will probably become even more important in the near future.It might look like with allows for cleaner constructs (when, say, introducing a new scope instead of a common anonymous function wrapper or replacing verbose aliasing), but it\'s  really not worth it. Besides a decreased performance, there\'s always a danger of assigning to a property of a wrong object (when property is not found on an object in injected scope) and perhaps erroneously introducing global variables. IIRC, latter issue is the one that motivated Crockford to recommend to avoid with.Visual Basic.NET has a similar With statement. One of the more common ways I use it is to quickly set a number of properties. Instead of:, I can write:This isn\'t just a matter of laziness. It also makes for much more readable code. And unlike JavaScript, it does not suffer from ambiguity, as you have to prefix everything affected by the statement with a . (dot). So, the following two are clearly distinct:vs.The former is someObject.Foo; the latter is Foo in the scope outside someObject.I find that JavaScript\'s lack of distinction makes it far less useful than Visual Basic\'s variant, as the risk of ambiguity is too high. Other than that, with is still a powerful idea that can make for better readability.Using "with" can make your code more dry.Consider the following code:You can dry it to the following:I guess it depends whether you have a preference for legibility or expressiveness. The first example is more legible and probably recommended for most code. But most code is pretty tame anyway. The second one is a bit more obscure but uses the expressive nature of the language to cut down on code size and superfluous variables.I imagine people who like Java or C# would choose the first way (object.member) and those who prefer Ruby or Python would choose the latter.You can use with to introduce the contents of an object as local variables to a block, like it\'s being done with this small template engine.I think the obvious use is as a shortcut. If you\'re e.g. initializing an object you simply save typing a lot of "ObjectName." Kind of like lisp\'s "with-slots" which lets you write which is the same as writingIt\'s more obvious why this is a shortcut then when your language allows "Objectname.foo" but still.Having experience with Delphi, I would say that using with should be a last-resort size optimization, possibly performed by some kind of javascript minimizer algorithm with access to static code analysis to verify its safety.The scoping problems you can get into with liberal use of the with statement can be a royal pain in the a** and I wouldn\'t want anyone to experience a debugging session to figure out what the he.. is going on in your code, only to find out that it captured an object member or the wrong local variable, instead of your global or outer scope variable which you intended.The VB with statement is better, in that it needs the dots to disambiguate the scoping, but the Delphi with statement is a loaded gun with a hairtrigger, and it looks to me as though the javascript one is similar enough to warrant the same warning.The with statement can be used to decrease the code size or for private class members, example:The with-statement is very usefull if you want to modify the scope, what is necessary for having your own global scope that you can manipulate at runtime. You can put constants on it or certain helper functions often used like e.g. "toUpper", "toLower" or "isNumber", "clipNumber" aso..About the bad performance I read that often: Scoping a function won\'t have any impact on the performance, in fact in my FF a scoped function runs faster then an unscoped:So in the above mentioned way used the with-statement has no negative effect on performance, but a good one as it deceases the code size, what impacts the memory usage on mobile devices.Using with is not recommended, and is forbidden in ECMAScript 5 strict mode. The recommended alternative is to assign the object whose properties you want to access to a temporary variable.Source: Mozilla.orgUsing with also makes your code slower in many implementation, as everything now gets wrapped in an extra scope for lookup. There\'s no legitimate reason for using with in JavaScript.I think that the usefulness of with can be dependent on how well your code is written. For example, if you\'re writing code that appears like this:then you could argue that with will improve the readability of the code by doing this:Conversely, it could be argued that you\'re violating the Law of Demeter, but, then again, maybe not. I digress =).Above all else, know that Douglas Crockford recommends not using with. I urge you to check out his blog post regarding with and its alternatives here.I think the with-statement can come in handy when converting a template language into JavaScript. For example JST in base2, but I\'ve seen it more often. I agree one can program this without the with-statement. But because it doesn\'t give any problems it is a legitimate use. I think the object literal use is interesting, like a drop-in replacement for using a closureor the with statement equivilent of a closureI think the real risk is accidently minipulating variables that are not part of the with statement, which is why I like the object literal being passed into with, you can see exactly what it will be in the added context in the code.I created a "merge" function which eliminates some of this ambiguity with the with statement:I can use it similarly to with, but I can know it won\'t affect any scope which I don\'t intend for it to affect.Usage:For some short code pieces, I would like to use the trigonometric functions like sin, cos etc. in degree mode instead of in radiant mode. For this purpose, I use an AngularDegreeobject: Then I can use the trigonometric functions in degree mode without further language noise in a with block: This means: I use an object as a collection of functions, which I enable in a limited code region for direct access. I find this useful.I just really don\'t see how using the with is any more readable than just typing object.member.  I don\'t think it\'s any less readable, but I don\'t think it\'s any more readable either.Like lassevk said, I can definitely see how using with would be more error prone than just using the very explicit "object.member" syntax.It\'s good for putting code that runs in a relatively complicated environment into a container: I use it to make a local binding for "window" and such to run code meant for a web browser.You got to see the validation of a form in javascript at W3schools http://www.w3schools.com/js/js_form_validation.asp where the object form is "scanned" through to find an input with name \'email\'But i\'ve modified it to get from ANY form all the fields validate as not empty, regardless of the name or quantity of field in a form. Well i\'ve tested only text-fields.But the with() made things simpler. Here\'s the code:CoffeeScript\'s Coco fork has a with keyword, but it simply sets this (also writable as @ in CoffeeScript/Coco) to the target object within the block. This removes ambiguity and achieves ES5 strict mode compliance:Here\'s a good use for with: adding new elements to an Object Literal, based on values stored in that Object.  Here\'s an example that I just used today:I had a set of possible tiles (with openings facing top, bottom, left, or right) that could be used, and I wanted a quick way of adding a list of tiles which would be always placed and locked at the start of the game.  I didn\'t want to keep typing types.tbr for each type in the list, so I just used with.You can use with to avoid having to explicitly manage arity when using require.js:  Implementation of requirejs.declare:As Andy E pointed out in the comments of Shog9\'s answer, this potentially-unexpected behavior occurs when using with with an object literal:Not that unexpected behavior wasn\'t already a hallmark of with.If you really still want to use this technique, at least use an object with a null prototype.But this will only work in ES5+. Also don\'t use with.I am working on a project that will allow users to upload code in order to modify the behavior of parts of the application.  In this scenario, I have been using a with clause to keep their code from modifying anything outside of the scope that I want them to mess around with.  The (simplified) portion of code I use to do this is:This code ensures (somewhat) that the user-defined code neither has access to any globally-scoped objects such as window nor to any of my local variables through a closure.Just as a word to the wise, I still have to perform static code checks on the user-submitted code to ensure they aren\'t using other sneaky manners to access global scope.  For instance, the following user-defined code grabs direct access to window:My boils down toCan you trust so low-quality code? No, we see that it was made absolutely unreadable. This example undeniably proves that there is no need for with-statement, if I am taking readability right ;)