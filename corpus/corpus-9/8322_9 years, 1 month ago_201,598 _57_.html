The firewall I\'m behind is running Microsoft ISA server in NTLM-only mode. Hash anyone have success getting their Ruby gems to install/update via Ruby SSPI gem or other method?... or am I just being lazy?Note: rubysspi-1.2.4 does not work.This also works for "igem", part of the IronRuby projectI wasn\'t able to get mine working from the command-line switch but I have been able to do it just by setting my HTTP_PROXY environment variable. (Note that case seems to be important). I have a batch file that has a line like this in it:I set the four referenced variables before I get to this line obviously. As an example if my username is "wolfbyte", my password is "secret" and my proxy is called "pigsy" and operates on port 8080:You might want to be careful how you manage that because it stores your password in plain text in the machine\'s session but I don\'t think it should be too much of an issue.For the Windows OS, I used Fiddler to work around the issue.Run gem:This totally worked:I\'ve been using cntlm (http://cntlm.sourceforge.net/) at work.  Configuration is very similar to ntlmaps.Works great, and also allows me to connect my Ubuntu box to the ISA proxy.Check out http://cntlm.wiki.sourceforge.net/ for more informationI tried some of these solutions, and none of them worked. I finally found a solution that works for me:using the -p parameter to pass the proxy.  I\'m using Gem version 1.9.1.This solved my problem perfectly:You might need to add your user name and password to it:If you are having problems getting authenticated through your proxy, be sure to set the environment variables in exactly the format below:  The user:password@ syntax doesn\'t seem to work and there are also some badly named environment variables floating around on Stack Overflow and various forum posts.  Also be aware that it can take a while for your gems to start downloading.  At first I thought it wasn\'t working but with a bit of patience they started downloading as expected.Create a .gemrc file (either in /etc/gemrc or ~/.gemrc or for example with chef gem in /opt/chef/embedded/etc/gemrc) containing:Then you can gem install as usual. I tried all the above solutions, however none of them worked. If you\'re on linux/macOS i highly suggest using tsocks over an ssh tunnel. What you need in order to get this setup working is a machine where you can log in via ssh, and in addition to that a programm called tsocks installed. The idea here is to create a dynamic tunnel via SSH (a socks5 proxy). We then configure tsocks to use this tunnel and to start our applications, in this case:or to account for rails 3.0:A more detailed guide can be found under:http://blog.byscripts.info/2011/04/bypass-a-proxy-with-ssh-tunnel-and-tsocks-under-ubuntu/Despite being written for Ubuntu the procedure should be applicable for all Unix based machines. An alternative to tsocks for Windows is FreeCap (http://www.freecap.ru/eng/). A viable SSH client on windows is called putty.Posts abound regarding this topic, and to help others save hours of trying different solutions, here is the final result of my hours of tinkering.The three solutions around the internet at the moment are:\nrubysspi\napserver\ncntlmrubysspi only works from a Windows machine, AFAIK, as it relies on the Win32Api library.  So if you are on a Windows box trying to run through a proxy, this is the solution for you.  If you are on a Linux distro, you\'re out of luck.apserver seems to be a dead project.  The link listed in the posts I\'ve seen lead to 404 page on sourceforge.  I search for "apserver" on sourceforge returns nothing.The sourceforge link for cntlm that I\'ve seen redirects to http://cntlm.awk.cz/, but that times out.  A search on sourceforge turns up this link, which does work: http://sourceforge.net/projects/cntlm/After downloading and configuring cntlm I have managed to install a gem through the proxy, so this seems to be the best solution for Linux distros.A workaround is to install http://apserver.sourceforge.net on your local machine, configure it and run gems through this proxy.I am working behind a proxy and just installed SASS by downloading directly from http://rubygems.org.I then ran sudo gem install [path/to/downloaded/gem/file]. I cannot say this will work for all gems, but it may help some people.This worked for me in a Windows box:I have a batch file with these lines that I use to set environment values when I need it.The trick, in my case, was HTTPS_PROXY sets. Without them, I always got a 407 proxy authentication error.rubysspi-1.3.1 worked for me on Windows 7, using the instructions from this page:http://www.stuartellis.eu/articles/installing-ruby/If you are on a *nix system, use this:and then try:If you want to use SOCKS5 proxy, you may try rubygems-socksproxy https://github.com/gussan/rubygems-socksproxy.It works for me on OSX 10.9.3.If behind a proxy, you can navigate to Ruby downloads, click on Download, which will download the specified update ( or Gem ) to a desired location.Next, via Ruby command line, navigate to the downloaded location by using : pushd [directory] eg : pushd D:\\Setups then run the following command: gem install [update name] --localeg: gem install rubygems-update --local.Tested on Windows 7 with Ruby update version 2.4.1.To check use following command : ruby -v Rather than editing batch files (which you may have to do for other Ruby gems, e.g. Bundler), it\'s probably better to do this once, and do it properly.On Windows, behind my corporate proxy, all I had to do was add the HTTP_PROXY environment variable to my system.Depending on your authentication requirements, the HTTP_PROXY value can be as simple as:Or more complex as others have pointed out