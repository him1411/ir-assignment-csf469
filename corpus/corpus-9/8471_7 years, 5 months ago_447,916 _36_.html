It often happens to me to handle data that can be either an array or a null variable and to feed some foreach with these data.When you feed a foreach with data that are not an array, you get a warning:Warning: Invalid argument supplied for foreach() in [...]Assuming it\'s not possible to refactor the get_values() function to always return an array (backward compatibility, not available source code, whatever other reason), I\'m wondering which is the cleanest and most efficient way to avoid these warnings:Personally I find this to be the most clean - not sure if it\'s the most efficient, mind!The reason for my preference is it doesn\'t allocate an empty array when you\'ve got nothing to begin with anyway.How about this one? lot cleaner and all in single line.I usually use a construct similar to this:Note that this particular version is not tested, its typed directly into SO from memory.Edit: added Traversable checkPlease do not depend on casting as a solution,\neven though others are suggesting this as a valid option to prevent an error, it might cause another one.Be aware: If you expect a specific form of array to be returned, this might fail you. More checks are required for that.E.g. casting a boolean to an array (array)bool, will NOT result in an empty array, but an array with one element containing the boolean value as an int: [0=>0] or [0=>1].I wrote a quick test to present this problem.\n(Here is a backup Test in case the first test url fails.)Included are tests for: null, false, true, a class, an array and undefined.Always test your input before using it in foreach. Suggestions: First of all, every variable must be initialized. Always.\nCasting is not an option.\nif get_values(); can return different type variable, this value must be checked, of course.Try this:;)Problem is always null and Casting is in fact the cleaning solution.I am not sure if this is the case but this problem seems to occur a number of times when migrating wordpress sites or migrating dynamic sites in general. If this is the case make sure the hosting you are migrating to uses the same PHP version your old site uses.If you are not migrating your site and this is just a problem that has come up try updating to PHP 5. This takes care of some of these problems. Might seem like a silly solution but did the trick for me. More concise extension of @Kris\'s codeespecially for using inside template code This doesen\'t check if it is an array, but skips the loop if the variable is null or an empty array.If you\'re using php7 and you want to handle only undefined errors this is the cleanest IMHOThere seems also to be a relation to the environment:I had that "invalid argument supplied foreach()" error only in the dev environment, but not in prod (I am working on the server, not localhost).Despite the error a var_dump indicated that the array was well there (in both cases app and dev).The if (is_array($array)) around the foreach ($array as $subarray) solved the problem.Sorry, that I cannot explain the cause, but as it took me a while to figure a solution I thought of better sharing this as an observation.warning invalid argument supplied for foreach() display tweets.\ngo to . /wp-content/plugins/display-tweets-phpinsert this coad on line number 591. It will run PerfectlyExceptional case for this notice occurs if you set array to null inside foreach loop i would do the same thing as Andy but i\'ld use the \'empty\' function.like so: