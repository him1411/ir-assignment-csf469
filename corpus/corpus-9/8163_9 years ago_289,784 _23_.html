I want to loop over the contents of a text file and do a search and replace on some lines and write the result back to the file. I could first load the whole file in memory and then write it back, but that probably is not the best way to do it.What is the best way to do this, within the following code?I guess something like this should do it. It basically writes the content to a new file and replaces the old file with the new file:The shortest way would probably be to use the fileinput module. For example, the following adds line numbers to a file, in-place:What happens here is:fileinput has more bells and whistles. For example, it can be used to automatically operate on all files in sys.args[1:], without your having to iterate over them explicitly. Starting with Python 3.2 it also provides a convenient context manager for use in a with statement.While fileinput is great for throwaway scripts, I would be wary of using it in real code because admittedly it\'s not very readable or familiar. In real (production) code it\'s worthwhile to spend just a few more lines of code to make the process explicit and thus make the code readable.There are two options:Here\'s another example that was tested, and will match search & replace patterns:Example use:This should work: (inplace editing)Based on the answer by Thomas Watnedal. \nHowever, this does not answer the line-to-line part of the original question exactly. The function can still replace on a line-to-line basis This implementation replaces the file contents without using temporary files, as a consequence file permissions remain unchanged.Also re.sub instead of replace, allows regex replacement instead of plain text replacement only.Reading the file as a single string instead of line by line allows for multiline match and replacement.As lassevk suggests, write out the new file as you go, here is some example code:If you\'re wanting a generic function that replaces any text with some other text, this is likely the best way to go, particularly if you\'re a fan of regex\'s:A more pythonic way would be to use context managers like the code below:You can find the full snippet here.Expanding on @Kiran\'s answer, which I agree is more succinct and Pythonic, this adds codecs to support the reading and writing of UTF-8:Create a new file, copy lines from the old to the new, and do the replacing before you write the lines to the new file.if you remove the indent at the like below, it will search and replace in multiple line.\nSee below for example.Using hamishmcn\'s answer as a template I was able to search for a line in a file that match my regex and replacing it with empty string.