I\'m trying to use Java (not XML) to create a LinearLayout with buttons that fill the screen, and have margins. Here is code that works without margins:So that works fine, but how on earth do you give the buttons margins so there is space between them? I tried using LinearLayout.MarginLayoutParams, but that has no weight member so it\'s no good. And it doesn\'t work if you pass it lp in its constructor either.Is this impossible? Because it sure looks it, and it wouldn\'t be the first Android layout task you can only do in XML.Here is a little code to accomplish it:So that works fine, but how on earth\n  do you give the buttons margins so\n  there is space between them?You call setMargins() on the LinearLayout.LayoutParams object.I tried using\n  LinearLayout.MarginLayoutParams, but\n  that has no weight member so it\'s no\n  good.LinearLayout.LayoutParams is a subclass of LinearLayout.MarginLayoutParams, as indicated in the documentation.Is this impossible?No.it wouldn\'t be the first Android\n  layout task you can only do in XMLYou are welcome to supply proof of this claim.Personally, I am unaware of anything that can only be accomplished via XML and not through Java methods in the SDK. In fact, by definition, everything has to be doable via Java (though not necessarily via SDK-reachable methods), since XML is not executable code. But, if you\'re aware of something, point it out, because that\'s a bug in the SDK that should get fixed someday.To add margins directly to items (some items allow direct editing of margins), you can do:...this works without needing to know about / edit the surrounding layout. Note the "instanceof" check in case you try and run this against something that doesn\'t support margins.Due to variation in device screen pixel densities its good to always use DIP unit to set margin programmatically. Like below_ Hope this will help.Try thisI have set up margins directly using below codeOnly thing here is to notice that LayoutParams should be imported for following package android.widget.RelativeLayout.LayoutParams, or else there will be an error.you should be ware of the type of the view\'s viewGroup.In the code above, for example,I want to change the frameLayout\'s margin,and the frameLayout\'s view group is a RelativeLayout\xef\xbc\x8cso you need to covert to (RelativeLayout.LayoutParams)Here a single line Solution:Try this: